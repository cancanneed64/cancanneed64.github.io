<!DOCTYPE html>
<html lang="zh-cn" dir="ltr">
    <head><meta charset='utf-8'>
<meta name='viewport' content='width=device-width, initial-scale=1'><meta name='description' content="æ—¥å¸¸ä½¿ç”¨">
<title>Gowebå…¥é—¨</title>

<link rel='canonical' href='https://cancanneed64.github.io/p/goweb%E5%85%A5%E9%97%A8/'>

<link rel="stylesheet" href="/scss/style.min.01ea4f5160fffb744444d67cd8add73a72970c6fd71cc4a2117d4daf37fc4940.css"><meta property='og:title' content="Gowebå…¥é—¨">
<meta property='og:description' content="æ—¥å¸¸ä½¿ç”¨">
<meta property='og:url' content='https://cancanneed64.github.io/p/goweb%E5%85%A5%E9%97%A8/'>
<meta property='og:site_name' content='Cancanneed64'>
<meta property='og:type' content='article'><meta property='article:section' content='Post' /><meta property='article:published_time' content='2023-05-07T00:00:00&#43;00:00'/><meta property='article:modified_time' content='2025-11-17T12:56:40&#43;00:00'/>
<meta name="twitter:title" content="Gowebå…¥é—¨">
<meta name="twitter:description" content="æ—¥å¸¸ä½¿ç”¨">
    <link rel="shortcut icon" href="/favicon.svg" />

  



<span id="top"></span>




	 <link rel="stylesheet" href="/css/prism.css"/>


    </head>
    <body class="
    article-page
    ">
    <script>
        (function() {
            const colorSchemeKey = 'StackColorScheme';
            if(!localStorage.getItem(colorSchemeKey)){
                localStorage.setItem(colorSchemeKey, "auto");
            }
        })();
    </script><script>
    (function() {
        const colorSchemeKey = 'StackColorScheme';
        const colorSchemeItem = localStorage.getItem(colorSchemeKey);
        const supportDarkMode = window.matchMedia('(prefers-color-scheme: dark)').matches === true;

        if (colorSchemeItem == 'dark' || colorSchemeItem === 'auto' && supportDarkMode) {
            

            document.documentElement.dataset.scheme = 'dark';
        } else {
            document.documentElement.dataset.scheme = 'light';
        }
    })();
</script>
<div class="container main-container flex on-phone--column extended"><aside class="sidebar left-sidebar sticky ">
    <button class="hamburger hamburger--spin" type="button" id="toggle-menu" aria-label="åˆ‡æ¢èœå•">
        <span class="hamburger-box">
            <span class="hamburger-inner"></span>
        </span>
    </button>

    <header>
        
            
            <figure class="site-avatar">
                <a href="/">
                
                    
                    
                    
                        
                        <img src="/img/avatar_hu5f048b0037a3ebe412d4c3c4b3d8d9e8_103276_300x0_resize_q75_box.jpg" width="300"
                            height="324" class="site-logo" loading="lazy" alt="Avatar">
                    
                
                </a>
                
                    <span class="emoji">ğŸŒŸ</span>
                
            </figure>
            
        
        
        <div class="site-meta">
            <h1 class="site-name"><a href="/">Cancanneed64</a></h1>
            <h2 class="site-description">æ¬¢è¿å…‰ä¸´ ç‚¹å‡»å³å¯¼èˆªæ é»‘è‰²è´è¶å›åˆ°æ–‡ç« é¡¶éƒ¨</h2>
        </div>
    </header><ol class="menu-social">
            
                <li>
                    <a 
                        href='https://github.com/cancanneed64'
                        target="_blank"
                        title="GitHub"
                        rel="me"
                    >
                        
                        
                            <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-brand-github" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
  <path stroke="none" d="M0 0h24v24H0z" fill="none"/>
  <path d="M9 19c-4.3 1.4 -4.3 -2.5 -6 -3m12 5v-3.5c0 -1 .1 -1.4 -.5 -2c2.8 -.3 5.5 -1.4 5.5 -6a4.6 4.6 0 0 0 -1.3 -3.2a4.2 4.2 0 0 0 -.1 -3.2s-1.1 -.3 -3.5 1.3a12.3 12.3 0 0 0 -6.2 0c-2.4 -1.6 -3.5 -1.3 -3.5 -1.3a4.2 4.2 0 0 0 -.1 3.2a4.6 4.6 0 0 0 -1.3 3.2c0 4.6 2.7 5.7 5.5 6c-.6 .6 -.6 1.2 -.5 2v3.5" />
</svg>



                        
                    </a>
                </li>
            
                <li>
                    <a 
                        href='https://twitter.com'
                        target="_blank"
                        title="Twitter"
                        rel="me"
                    >
                        
                        
                            <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-brand-twitter" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
  <path stroke="none" d="M0 0h24v24H0z" fill="none"/>
  <path d="M22 4.01c-1 .49 -1.98 .689 -3 .99c-1.121 -1.265 -2.783 -1.335 -4.38 -.737s-2.643 2.06 -2.62 3.737v1c-3.245 .083 -6.135 -1.395 -8 -4c0 0 -4.182 7.433 4 11c-1.872 1.247 -3.739 2.088 -6 2c3.308 1.803 6.913 2.423 10.034 1.517c3.58 -1.04 6.522 -3.723 7.651 -7.742a13.84 13.84 0 0 0 .497 -3.753c-.002 -.249 1.51 -2.772 1.818 -4.013z" />
</svg>



                        
                    </a>
                </li>
            
        </ol><ol class="menu" id="main-menu">
        
        
        
        <li >
            <a href='/' >
                
                
                
                    <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-home" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
  <path stroke="none" d="M0 0h24v24H0z"/>
  <polyline points="5 12 3 12 12 3 21 12 19 12" />
  <path d="M5 12v7a2 2 0 0 0 2 2h10a2 2 0 0 0 2 -2v-7" />
  <path d="M9 21v-6a2 2 0 0 1 2 -2h2a2 2 0 0 1 2 2v6" />
</svg>



                
                <span>ä¸»é¡µ</span>
            </a>
        </li>
        
        
        <li >
            <a href='/%E5%85%B3%E4%BA%8E/' >
                
                
                
                    <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-user" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
  <path stroke="none" d="M0 0h24v24H0z"/>
  <circle cx="12" cy="7" r="4" />
  <path d="M6 21v-2a4 4 0 0 1 4 -4h4a4 4 0 0 1 4 4v2" />
</svg>



                
                <span>å…³äº</span>
            </a>
        </li>
        
        
        <li >
            <a href='/archives/' >
                
                
                
                    <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-archive" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
  <path stroke="none" d="M0 0h24v24H0z"/>
  <rect x="3" y="4" width="18" height="4" rx="2" />
  <path d="M5 8v10a2 2 0 0 0 2 2h10a2 2 0 0 0 2 -2v-10" />
  <line x1="10" y1="12" x2="14" y2="12" />
</svg>



                
                <span>å½’æ¡£</span>
            </a>
        </li>
        
        
        <li >
            <a href='/search/' >
                
                
                
                    <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-search" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
  <path stroke="none" d="M0 0h24v24H0z"/>
  <circle cx="10" cy="10" r="7" />
  <line x1="21" y1="21" x2="15" y2="15" />
</svg>



                
                <span>æœç´¢</span>
            </a>
        </li>
        
        
        <li >
            <a href='/%E5%8F%8B%E6%83%85%E9%93%BE%E6%8E%A5/' >
                
                
                
                    <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-link" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
  <path stroke="none" d="M0 0h24v24H0z"/>
  <path d="M10 14a3.5 3.5 0 0 0 5 0l4 -4a3.5 3.5 0 0 0 -5 -5l-.5 .5" />
  <path d="M14 10a3.5 3.5 0 0 0 -5 0l-4 4a3.5 3.5 0 0 0 5 5l.5 -.5" />
</svg>



                
                <span>å‹æƒ…é“¾æ¥</span>
            </a>
        </li>
        
        <li class="menu-bottom-section">
            <ol class="menu">

                
                    <li id="dark-mode-toggle">
                        <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-toggle-left" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
  <path stroke="none" d="M0 0h24v24H0z"/>
  <circle cx="8" cy="12" r="2" />
  <rect x="2" y="6" width="20" height="12" rx="6" />
</svg>



                        <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-toggle-right" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
  <path stroke="none" d="M0 0h24v24H0z"/>
  <circle cx="16" cy="12" r="2" />
  <rect x="2" y="6" width="20" height="12" rx="6" />
</svg>



                        <span>æš—è‰²æ¨¡å¼</span>
                    </li>
                
            </ol>
        </li>
    </ol>
</aside>

    <aside class="sidebar right-sidebar sticky">
        
            
                
    <section class="widget archives">
        <div class="widget-icon">
            <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-hash" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
  <path stroke="none" d="M0 0h24v24H0z"/>
  <line x1="5" y1="9" x2="19" y2="9" />
  <line x1="5" y1="15" x2="19" y2="15" />
  <line x1="11" y1="4" x2="7" y2="20" />
  <line x1="17" y1="4" x2="13" y2="20" />
</svg>



        </div>
        <h2 class="widget-title section-title">ç›®å½•</h2>
        
        <div class="widget--toc">
            <nav id="TableOfContents">
  <ol>
    <li><a href="#å·¥å…·">å·¥å…·</a>
      <ol>
        <li><a href="#nc-å‘½ä»¤">nc å‘½ä»¤</a></li>
        <li><a href="#è°ƒè¯•çƒ­åŠ è½½">è°ƒè¯•çƒ­åŠ è½½</a></li>
        <li><a href="#å¤„ç†è¯·æ±‚">å¤„ç†è¯·æ±‚</a></li>
      </ol>
    </li>
    <li><a href="#restful-api">RESTful API</a></li>
    <li><a href="#é€šè®¯é—®é¢˜">é€šè®¯é—®é¢˜</a></li>
    <li><a href="#åŸºç¡€">åŸºç¡€</a>
      <ol>
        <li><a href="#æ•°æ®æ¨¡å‹">æ•°æ®æ¨¡å‹</a></li>
        <li><a href="#å®‰è£…-postgresql">å®‰è£… PostgreSQL</a></li>
        <li><a href="#ssl">SSL</a></li>
        <li><a href="#å¤„ç†å™¨ä¸å¤„ç†å™¨å‡½æ•°">å¤„ç†å™¨ä¸å¤„ç†å™¨å‡½æ•°</a></li>
        <li><a href="#è¡¨å•-enctype-å±æ€§">è¡¨å• enctype å±æ€§</a></li>
        <li><a href="#åˆ†æå­—æ®µ">åˆ†æå­—æ®µ</a></li>
      </ol>
    </li>
    <li><a href="#5-æ¨¡æ¿å¼•æ“">5. æ¨¡æ¿å¼•æ“</a>
      <ol>
        <li><a href="#æ„å»ºè¿è¡Œ">æ„å»ºè¿è¡Œ</a></li>
        <li><a href="#å­˜å‚¨æ•°æ®">å­˜å‚¨æ•°æ®</a>
          <ol>
            <li><a href="#csv-å¤„ç†">CSV å¤„ç†</a></li>
            <li><a href="#gob-åŒ…">gob åŒ…</a></li>
            <li><a href="#postgres-crud">Postgres CRUD</a></li>
          </ol>
        </li>
      </ol>
    </li>
    <li><a href="#7go-web">7.go web</a>
      <ol>
        <li><a href="#xml">XML</a></li>
        <li><a href="#json">JSON</a></li>
      </ol>
    </li>
    <li><a href="#å¹¶å‘ä¸å¹¶è¡Œ">å¹¶å‘ä¸å¹¶è¡Œ</a>
      <ol>
        <li><a href="#æ‰“å°æ•°å­—å’Œè‹±æ–‡">æ‰“å°æ•°å­—å’Œè‹±æ–‡</a></li>
        <li><a href="#ç­‰å¾…æ‰§è¡Œå®Œæ¯•">ç­‰å¾…æ‰§è¡Œå®Œæ¯•</a></li>
        <li><a href="#é€šé“">é€šé“</a></li>
        <li><a href="#é©¬èµ›å…‹ç®—æ³•">é©¬èµ›å…‹ç®—æ³•</a></li>
      </ol>
    </li>
  </ol>
</nav>
        </div>
    </section>


<a href="#top" class="backtop"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 576 512"><path d="M407.8 294.7c-3.3-.4-6.7-.8-10-1.3c3.4 .4 6.7 .9 10 1.3zM288 227.1C261.9 176.4 190.9 81.9 124.9 35.3C61.6-9.4 37.5-1.7 21.6 5.5C3.3 13.8 0 41.9 0 58.4S9.1 194 15 213.9c19.5 65.7 89.1 87.9 153.2 80.7c3.3-.5 6.6-.9 10-1.4c-3.3 .5-6.6 1-10 1.4C74.3 308.6-9.1 342.8 100.3 464.5C220.6 589.1 265.1 437.8 288 361.1c22.9 76.7 49.2 222.5 185.6 103.4c102.4-103.4 28.1-156-65.8-169.9c-3.3-.4-6.7-.8-10-1.3c3.4 .4 6.7 .9 10 1.3c64.1 7.1 133.6-15.1 153.2-80.7C566.9 194 576 75 576 58.4s-3.3-44.7-21.6-52.9c-15.8-7.1-40-14.9-103.2 29.8C385.1 81.9 314.1 176.4 288 227.1z"/></svg></a>



            
        
    </aside>


            <main class="main full-width">
    <article class="main-article">
    <header class="article-header">

    <div class="article-details">
    
    <header class="article-category">
        
            <a href="/categories/go/" >
                Go
            </a>
        
    </header>
    

    <div class="article-title-wrapper">
        <h2 class="article-title">
            <a href="/p/goweb%E5%85%A5%E9%97%A8/">Gowebå…¥é—¨</a>
        </h2>
    
        
        <h3 class="article-subtitle">
            æ—¥å¸¸ä½¿ç”¨
        </h3>
        
    </div>

    
    
    
    
    <footer class="article-time">
        
            <div>
                <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-calendar-time" width="56" height="56" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
  <path stroke="none" d="M0 0h24v24H0z"/>
  <path d="M11.795 21h-6.795a2 2 0 0 1 -2 -2v-12a2 2 0 0 1 2 -2h12a2 2 0 0 1 2 2v4" />
  <circle cx="18" cy="18" r="4" />
  <path d="M15 3v4" />
  <path d="M7 3v4" />
  <path d="M3 11h16" />
  <path d="M18 16.496v1.504l1 1" />
</svg>
                <time class="article-time--published">05æœˆ07æ—¥, 2023å¹´</time>
            </div>
        

        
            <div>
                <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-clock" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
  <path stroke="none" d="M0 0h24v24H0z"/>
  <circle cx="12" cy="12" r="9" />
  <polyline points="12 7 12 12 15 15" />
</svg>



                <time class="article-time--reading">
                    é˜…è¯»æ—¶é•¿: 9 åˆ†é’Ÿ
                </time>
            </div>
        
    </footer>
    

    
</div>

</header>

    <section class="article-content">
    
    

    <h1 id="goweb-å…¥é—¨">goweb å…¥é—¨
</h1><h2 id="å·¥å…·">å·¥å…·
</h2><h3 id="nc-å‘½ä»¤">nc å‘½ä»¤
</h3><p><a class="link" href="https://www.cnblogs.com/nmap/p/6148306.html"  target="_blank" rel="noopener"
    >nc ç”¨æ³•</a></p>
<h3 id="è°ƒè¯•çƒ­åŠ è½½">è°ƒè¯•çƒ­åŠ è½½
</h3><p><a class="link" href="https://www.cnblogs.com/xingxia/p/golang_fresh.html"  target="_blank" rel="noopener"
    >çƒ­åŠ è½½</a></p>
<p>fresh
<code>go get -v -u github.com/pilu/fresh</code>
<code>go install</code></p>
<p>air
<code>go get -u github.com/cosmtrek/air</code></p>
<h3 id="å¤„ç†è¯·æ±‚">å¤„ç†è¯·æ±‚
</h3><p><a class="link" href="https://blog.csdn.net/hadues/article/details/101788327"  target="_blank" rel="noopener"
    >curl ä½¿ç”¨è¯´æ˜</a></p>
<p>powershell ä¸­éœ€è¦ä½¿ç”¨ curl.exe</p>
<h2 id="restful-api">RESTful API
</h2><p>é€šè¿‡è°ƒç”¨&quot;net/http&quot;å’Œ&quot;github.com/gin-gonic/gin&quot;</p>
<p>å®šä¹‰ album ç±»ï¼Œå®ä¾‹åŒ–</p>
<p>ç”¨ router:=gin.Default(),å»è°ƒç”¨ get/post å’Œå®šä¹‰çš„å…¶ä»–æ–¹æ³•</p>
<h2 id="é€šè®¯é—®é¢˜">é€šè®¯é—®é¢˜
</h2><ol>
<li>å­—ç¬¦æ˜¾ç¤ºé—®é¢˜</li>
</ol>
<p><code>chcp 65001</code></p>
<p>æ‰“å¼€ cmd è¿è¡Œå¯è§£å†³éƒ¨åˆ†é”™è¯¯</p>
<ol start="2">
<li>è¾“å…¥ç§’å‘é€</li>
</ol>
<p>é€»è¾‘</p>
<ul>
<li>server ç›‘å¬ç«¯å£</li>
<li>go ç›‘å¬æ¶ˆæ¯ï¼Œå°†ä¿¡æ¯å‘ç»™ usermap</li>
<li>æ¥å— socketï¼Œå¤„ç†ä¿¡æ¯</li>
</ul>
<ol start="3">
<li>
<p>æ–°ç‰ˆå®¢æˆ·ç«¯
æ²¡æœ‰å­˜åœ¨å­—ç¬¦é—®é¢˜
ä½† rename å’Œ who æœ‰é—®é¢˜
å­˜ç–‘
client ä¸­çš„æ¨¡å¼å¤„ç†
user ä¸­çš„ who å¤„ç†</p>
</li>
<li>
<p>44 é›†è¸¢å‡ºé—®é¢˜
åœ¨ handle å‡½æ•°ä¸­æ—¶é—´è¶…è¿‡åæ‰“å°è¢«è¸¢ä¿¡æ¯ï¼Œå¹¶ä¸”å…³é—­èµ„æºè¿æ¥ï¼Œè¿”å› start å‡½æ•°
ä½†æ˜¯åœ¨ start å‡½æ•°ä¸­ä¸€ç›´åœ¨ for å¾ªç¯ç›‘å¬ listenerï¼Œå› æ­¤ä¼šå ç”¨èµ„æº
é€šè¿‡æ’é”™ï¼Œå‘ç° server é—®é¢˜</p>
</li>
</ol>
<p>æ‰“å°é”™è¯¯</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-go" data-lang="go"><span class="line"><span class="cl"><span class="nx">_</span><span class="p">,</span> <span class="nx">err</span> <span class="o">:=</span> <span class="nx">this</span><span class="p">.</span><span class="nx">conn</span><span class="p">.</span><span class="nf">Write</span><span class="p">([]</span><span class="nb">byte</span><span class="p">(</span><span class="nx">msg</span> <span class="o">+</span> <span class="s">&#34;\n&#34;</span><span class="p">))</span>
</span></span><span class="line"><span class="cl"><span class="k">if</span> <span class="nx">err</span> <span class="o">!=</span> <span class="kc">nil</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl"><span class="nx">fmt</span><span class="p">.</span><span class="nf">Println</span><span class="p">(</span><span class="nx">err</span><span class="p">)</span>
</span></span><span class="line"><span class="cl"><span class="k">return</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>panic ç”¨æ³•</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-go" data-lang="go"><span class="line"><span class="cl"><span class="kd">func</span> <span class="nf">main</span><span class="p">()</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">	<span class="nf">test</span><span class="p">()</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="kd">func</span> <span class="nf">test</span><span class="p">()</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">	<span class="k">defer</span> <span class="kd">func</span><span class="p">()</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">		<span class="k">if</span> <span class="nx">err</span> <span class="o">:=</span> <span class="nb">recover</span><span class="p">();</span> <span class="nx">err</span> <span class="o">!=</span> <span class="kc">nil</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">			<span class="nx">fmt</span><span class="p">.</span><span class="nf">Printf</span><span class="p">(</span><span class="s">&#34;recover:%v\n&#34;</span><span class="p">,</span> <span class="nx">err</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">		<span class="p">}</span>
</span></span><span class="line"><span class="cl">	<span class="p">}()</span>
</span></span><span class="line"><span class="cl">	<span class="nb">panic</span><span class="p">(</span><span class="s">&#34;an error occurred&#34;</span><span class="p">)</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>for-range channel ç”¨æ³•
å½“ channel å…³é—­æ—¶ï¼Œfor å¾ªç¯ä¼šè‡ªåŠ¨é€€å‡ºï¼Œæ— éœ€ä¸»åŠ¨æ£€æµ‹ channel æ˜¯å¦å…³é—­ï¼Œé˜²æ­¢è¯»å–å·²å…³é—­çš„ channelï¼Œé€ æˆè¯»å–åˆ°æ•°æ®ä¸ºé€šé“æ‰€å­˜å‚¨çš„æ•°æ®ç±»å‹çš„é›¶å€¼</p>
<h2 id="åŸºç¡€">åŸºç¡€
</h2><h3 id="æ•°æ®æ¨¡å‹">æ•°æ®æ¨¡å‹
</h3><p>Userï¼Œsessionï¼Œthreadï¼Œpost å’Œæ•°æ®åº“äº¤äº’ï¼Œå¤„ç†å™¨è¿”å›æ•°æ®ç»™æ¨¡æ¿å¼•æ“ï¼Œå†ä¼ ç»™æ¨¡æ¿</p>
<p>é€šè¿‡ URL è¿›è¡Œæ¥å—è¯·æ±‚</p>
<p>å¤šè·¯å¤ç”¨å™¨
<code>mux := http.NewServeMux()</code>
net/httpï¼Œå°†æ”¶åˆ°çš„è¯·æ±‚é‡å®šå‘åˆ°å¤„ç†å™¨</p>
<p>å°†å‘é€è‡³æ ¹ URL çš„è¯·æ±‚é‡å®šå‘åˆ°å¤„ç†å™¨
<code>mux.HandleFunc(&quot;/&quot;, index)</code>
æ‰€æœ‰å¤„ç†å™¨éƒ½æ¥å—ä¸€ä¸ª ResponseWriter å’Œä¸€ä¸ªæŒ‡å‘ Request ç»“æ„çš„æŒ‡é’ˆä½œä¸ºå‚æ•°ï¼Œå¹¶ä¸”æ‰€æœ‰è¯·æ±‚å‚æ•°é€šè¿‡è®¿é—® Requset ç»“æ„å¾—åˆ°ï¼Œæ‰€ä»¥ç¨‹åºä¸éœ€è¦å‘å¤„ç†å™¨æ˜¾å¼åœ°ä¼ å…¥ä»»ä½•è¯·æ±‚å‚æ•°</p>
<p>æœåŠ¡é™æ€æ–‡ä»¶
<code>file := http.FileServer(http.Dir(&quot;/public&quot;))</code>
<code>mux.Handle(&quot;/static/&quot;, http.StripPrefix(&quot;/static/&quot;, files))</code>
åˆ é™¤/static/å­—ç¬¦ä¸²åœ¨ public ç›®å½•é‡ŒæŸ¥æ‰¾è¢«è¯·æ±‚çš„æ–‡ä»¶</p>
<p>å¤„ç†å™¨å‡½æ•°ï¼Œæ¥å— ResponseWriter å’Œ Request æŒ‡é’ˆä½œä¸ºå‚æ•°çš„å‡½æ•°</p>
<p>cookie æœåŠ¡å™¨åœ¨å“åº”é¦–éƒ¨å†™å…¥ cookieï¼Œå®¢æˆ·ç«¯æ¥å— cookie åæŠŠå®ƒå­˜å‚¨åˆ°æµè§ˆå™¨é‡Œï¼Œroute_auth.go çš„ authenticate å¤„ç†å™¨å‡½æ•°</p>
<p>session è®°å½•å„é¡¹ä¿¡æ¯å­˜å‚¨åˆ°æ•°æ®åº“ï¼Œå†³å®šè®¿é—® public æˆ– private é¡µé¢
utility åŒ…
åˆ¤æ–­ cookie å­˜åœ¨ï¼Œdata.Session çš„ check æ–¹æ³•è®¿é—®æ•°æ®åº“æ ¡å¯¹å”¯ä¸€ ID å­˜åœ¨ï¼Œindex å‡½æ•°è·å– err å˜é‡åˆ¤æ–­ç”¨æˆ·æ˜¯å¦å·²ç»ç™»å½•</p>
<p>ä½¿ç”¨æ¨¡æ¿ç”Ÿæˆ HTML å“åº”
ç”¨{{define &ldquo;&rdquo;}}æ ‡è¯†åŠ¨ä½œ
ParseFiles å‡½æ•°å¯¹æ¨¡æ¿è¿›è¡Œè¯­æ³•åˆ†æå¹¶åˆ›å»ºå‡ºç›¸åº”æ¨¡æ¿ï¼ŒMust å‡½æ•°åŒ…å›´ ParseFiles å‡½æ•°ï¼Œè¿”å›é”™è¯¯æŠ¥å‘Š</p>
<p>(.)ä»£è¡¨äº†ä¼ é€’ç»™è¢«å¼•ç”¨æ¨¡æ¿çš„æ•°æ®
{{.Topic}}è®¿é—®çš„æ˜¯ Thread ç»“æ„çš„ Topic å­—æ®µï¼Œåœ¨è®¿é—®å­—æ®µæ—¶å¿…é¡»åœ¨å­—æ®µåçš„å‰é¢åŠ ä¸Šç‚¹å·ï¼Œå¹¶ä¸”å­—æ®µåçš„é¦–å­—æ¯å¿…é¡»å¤§å†™</p>
<h3 id="å®‰è£…-postgresql">å®‰è£… PostgreSQL
</h3><p><a class="link" href="https://m.runoob.com/postgresql/postgresql-create-database.html"  target="_blank" rel="noopener"
    >æ•°æ®åº“åˆ›å»º</a></p>
<p>æŸ¥çœ‹æ•°æ®åº“ \l</p>
<p><a class="link" href="https://blog.csdn.net/weixin_44493195/article/details/106162814"  target="_blank" rel="noopener"
    >è¡¨æ ¼åˆ›å»º</a></p>
<blockquote>
<p>pq åŒ…è™½ç„¶ç”¨_å¿½ç•¥ï¼Œä½†å®é™…ä¸Šè¿æ¥æ•°æ®åº“è¿˜æ˜¯ä¼šè°ƒç”¨</p>
</blockquote>
<p>psql -f setup.sql -d chitchat æ— æ³•ç”Ÿæ•ˆ
æ‰‹åŠ¨åˆ›å»ºæ•°æ®åº“</p>
<p>åœ¨ chitchat ç›®å½•ä¸‹è¿è¡Œ go buildï¼ŒæŠ¥ data åŒ…é”™è¯¯ï¼Œç›´æ¥å°† data ä¸¢å…¥ src è·¯å¾„ï¼Œgo mod tidy è§£å†³</p>
<p><a class="link" href="https://blog.csdn.net/weixin_39493668/article/details/127071322"  target="_blank" rel="noopener"
    >æ·»åŠ é¡¹ç›®</a></p>
<h3 id="ssl">SSL
</h3><h3 id="å¤„ç†å™¨ä¸å¤„ç†å™¨å‡½æ•°">å¤„ç†å™¨ä¸å¤„ç†å™¨å‡½æ•°
</h3><p>ä»»ä½•å®ç°äº† ServeHTTP çš„ç±»å‹éƒ½å¯ä»¥ä½œä¸º HTTP è¯·æ±‚çš„å¤„ç†å™¨</p>
<p>å¤„ç†å™¨æ‹¥æœ‰ ServeHTTP æ–¹æ³•æ¥å£ï¼ŒServeHTTP éœ€è¦æ¥å—ä¸¤ä¸ªå‚æ•°ï¼ŒResponseWriter å’Œ Request æŒ‡é’ˆ</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-go" data-lang="go"><span class="line"><span class="cl"><span class="kd">type</span> <span class="nx">Handler</span> <span class="kd">interface</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="nf">ServeHTTP</span><span class="p">(</span><span class="nx">ResponseWriter</span><span class="p">,</span> <span class="o">*</span><span class="nx">Request</span><span class="p">)</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span><span class="line"><span class="cl"><span class="c1">// è‡ªå®šä¹‰ç±»å‹å®ç° Handler æ¥å£
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="kd">type</span> <span class="nx">MyHandler</span> <span class="kd">struct</span><span class="p">{}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="kd">func</span> <span class="p">(</span><span class="nx">h</span> <span class="o">*</span><span class="nx">MyHandler</span><span class="p">)</span> <span class="nf">ServeHTTP</span><span class="p">(</span><span class="nx">w</span> <span class="nx">http</span><span class="p">.</span><span class="nx">ResponseWriter</span><span class="p">,</span> <span class="nx">r</span> <span class="o">*</span><span class="nx">http</span><span class="p">.</span><span class="nx">Request</span><span class="p">)</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="nx">w</span><span class="p">.</span><span class="nf">Write</span><span class="p">([]</span><span class="nb">byte</span><span class="p">(</span><span class="s">&#34;Hello from Handler!&#34;</span><span class="p">))</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1">// æ³¨å†Œå¤„ç†å™¨
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="nx">http</span><span class="p">.</span><span class="nf">Handle</span><span class="p">(</span><span class="s">&#34;/path&#34;</span><span class="p">,</span> <span class="o">&amp;</span><span class="nx">MyHandler</span><span class="p">{})</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>å…è®¸æ™®é€šå‡½æ•°ç›´æ¥ä½œä¸ºå¤„ç†å™¨ä½¿ç”¨ï¼Œæ— éœ€å®šä¹‰æ–°ç±»å‹ã€‚</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-go" data-lang="go"><span class="line"><span class="cl"><span class="kd">type</span> <span class="nx">HandlerFunc</span> <span class="kd">func</span><span class="p">(</span><span class="nx">ResponseWriter</span><span class="p">,</span> <span class="o">*</span><span class="nx">Request</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1">// å®ç° ServeHTTP æ–¹æ³•ï¼ˆå°†å‡½æ•°è½¬ä¸º Handlerï¼‰
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="kd">func</span> <span class="p">(</span><span class="nx">f</span> <span class="nx">HandlerFunc</span><span class="p">)</span> <span class="nf">ServeHTTP</span><span class="p">(</span><span class="nx">w</span> <span class="nx">ResponseWriter</span><span class="p">,</span> <span class="nx">r</span> <span class="o">*</span><span class="nx">Request</span><span class="p">)</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="nf">f</span><span class="p">(</span><span class="nx">w</span><span class="p">,</span> <span class="nx">r</span><span class="p">)</span> <span class="c1">// ç›´æ¥è°ƒç”¨è‡ªèº«
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="p">}</span>
</span></span><span class="line"><span class="cl"><span class="c1">// æ™®é€šå‡½æ•°
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="kd">func</span> <span class="nf">helloHandler</span><span class="p">(</span><span class="nx">w</span> <span class="nx">http</span><span class="p">.</span><span class="nx">ResponseWriter</span><span class="p">,</span> <span class="nx">r</span> <span class="o">*</span><span class="nx">http</span><span class="p">.</span><span class="nx">Request</span><span class="p">)</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="nx">w</span><span class="p">.</span><span class="nf">Write</span><span class="p">([]</span><span class="nb">byte</span><span class="p">(</span><span class="s">&#34;Hello from HandlerFunc!&#34;</span><span class="p">))</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1">// å°†å‡½æ•°è½¬æ¢ä¸º HandlerFunc ç±»å‹ï¼Œå†æ³¨å†Œä¸ºå¤„ç†å™¨
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="nx">http</span><span class="p">.</span><span class="nf">Handle</span><span class="p">(</span><span class="s">&#34;/hello&#34;</span><span class="p">,</span> <span class="nx">http</span><span class="p">.</span><span class="nf">HandlerFunc</span><span class="p">(</span><span class="nx">helloHandler</span><span class="p">))</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1">// æ›´ç®€æ´çš„å†™æ³•ï¼ˆç›´æ¥ä½¿ç”¨ HandleFuncï¼‰
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="nx">http</span><span class="p">.</span><span class="nf">HandleFunc</span><span class="p">(</span><span class="s">&#34;/hello&#34;</span><span class="p">,</span> <span class="nx">helloHandler</span><span class="p">)</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>å¤„ç†å™¨å‡½æ•°ä¸å¤„ç†å™¨æœ‰ç›¸åŒè¡Œä¸ºï¼Œä¸ ServeHTTP æ–¹æ³•æ‹¥æœ‰ç›¸åŒç­¾å
<code>func hello(w http.ResponseWriter, r *http.Requset)</code>
<code>http.HandleFunc(&quot;/hello&quot;, hello)</code></p>
<p>HandleFunc å¯ä»¥æŠŠä¸€ä¸ªå¸¦æœ‰æ­£ç¡®ç­¾åçš„å‡½æ•° f è½¬æ¢æˆä¸€ä¸ªå¸¦æœ‰æ–¹æ³• f çš„ Handlerï¼Œå¹¶ä¸ DefaultServeMux è¿›è¡Œç»‘å®š</p>
<p>å¤„ç†å™¨å‡½æ•°ä¸èƒ½æ›¿ä»£å¤„ç†å™¨ï¼Œä»£ç åŒ…å«äº†æŸä¸ªæ¥å£æˆ–è€…æŸç§ç±»å‹ï¼Œéœ€è¦ä¸ºå®ƒä»¬æ·»åŠ  ServeHTTP æ–¹æ³•è½¬å˜ä¸ºå¤„ç†å™¨</p>
<p>ä¸²è”å¤„ç†å™¨å’Œå¤„ç†å™¨å‡½æ•°</p>
<p>ServeMux è¯·æ±‚å¤šè·¯å¤ç”¨å™¨ï¼ŒDefaultServeMux æ˜¯ ServeMux ä¸€ä¸ªå®ä¾‹ï¼Œç”¨æˆ·æ²¡æœ‰æŒ‡å®šå¤„ç†å™¨åˆ™ä¼šä½¿ç”¨</p>
<p>HTTP2
<code>http2.ConfigureServer(&amp;server, &amp;http2.Server{})</code>
<code>curl -I --http2 --insecure https://localhost:8080/</code></p>
<p>å®é™…åº”ç”¨åœ¨ä¸­é—´ä»¶ä¸­
é€šè¿‡ HandlerFunc é“¾å¼è°ƒç”¨å®ç°ä¸­é—´ä»¶</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span><span class="lnt">7
</span><span class="lnt">8
</span><span class="lnt">9
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-go" data-lang="go"><span class="line"><span class="cl"><span class="kd">func</span> <span class="nf">loggingMiddleware</span><span class="p">(</span><span class="nx">next</span> <span class="nx">http</span><span class="p">.</span><span class="nx">Handler</span><span class="p">)</span> <span class="nx">http</span><span class="p">.</span><span class="nx">Handler</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="k">return</span> <span class="nx">http</span><span class="p">.</span><span class="nf">HandlerFunc</span><span class="p">(</span><span class="kd">func</span><span class="p">(</span><span class="nx">w</span> <span class="nx">http</span><span class="p">.</span><span class="nx">ResponseWriter</span><span class="p">,</span> <span class="nx">r</span> <span class="o">*</span><span class="nx">http</span><span class="p">.</span><span class="nx">Request</span><span class="p">)</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">        <span class="nx">log</span><span class="p">.</span><span class="nf">Println</span><span class="p">(</span><span class="s">&#34;Request received:&#34;</span><span class="p">,</span> <span class="nx">r</span><span class="p">.</span><span class="nx">URL</span><span class="p">.</span><span class="nx">Path</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">        <span class="nx">next</span><span class="p">.</span><span class="nf">ServeHTTP</span><span class="p">(</span><span class="nx">w</span><span class="p">,</span> <span class="nx">r</span><span class="p">)</span> <span class="c1">// è°ƒç”¨ä¸‹ä¸€ä¸ªå¤„ç†å™¨
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>    <span class="p">})</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1">// ä½¿ç”¨ä¸­é—´ä»¶åŒ…è£…å¤„ç†å™¨
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="nx">http</span><span class="p">.</span><span class="nf">Handle</span><span class="p">(</span><span class="s">&#34;/secure&#34;</span><span class="p">,</span> <span class="nf">loggingMiddleware</span><span class="p">(</span><span class="o">&amp;</span><span class="nx">AuthHandler</span><span class="p">{}))</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>åœ¨ Gin ä¸­ï¼Œå¤„ç†å™¨å‡½æ•°é€šå¸¸æ˜¯ gin.HandlerFunc ç±»å‹ï¼Œä¸æ ‡å‡†åº“æ€æƒ³ç±»ä¼¼</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-go" data-lang="go"><span class="line"><span class="cl"><span class="kd">func</span> <span class="nf">ginHandler</span><span class="p">(</span><span class="nx">c</span> <span class="o">*</span><span class="nx">gin</span><span class="p">.</span><span class="nx">Context</span><span class="p">)</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="nx">c</span><span class="p">.</span><span class="nf">String</span><span class="p">(</span><span class="mi">200</span><span class="p">,</span> <span class="s">&#34;Hello Gin!&#34;</span><span class="p">)</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="nx">router</span> <span class="o">:=</span> <span class="nx">gin</span><span class="p">.</span><span class="nf">Default</span><span class="p">()</span>
</span></span><span class="line"><span class="cl"><span class="nx">router</span><span class="p">.</span><span class="nf">GET</span><span class="p">(</span><span class="s">&#34;/gin&#34;</span><span class="p">,</span> <span class="nx">ginHandler</span><span class="p">)</span> <span class="c1">// ç›´æ¥ä½¿ç”¨å‡½æ•°
</span></span></span></code></pre></td></tr></table>
</div>
</div><h3 id="è¡¨å•-enctype-å±æ€§">è¡¨å• enctype å±æ€§
</h3><p>ç®€å•ä½¿ç”¨
application/x-www-form-urlencoded
ä¸åŒå¾—é”®å€¼å¯¹å°†ä½¿ç”¨&amp;ç¬¦å·åˆ†éš”ï¼Œé”®å’Œå€¼ç”¨=åˆ†éš”
<code>first_name=sau%20sheong&amp;last_name=chang</code></p>
<p>ä¸Šä¼ æ–‡ä»¶ä½¿ç”¨
mutipart/form-data
è¡¨å•ä¸­å¾—é”®å€¼å¯¹å¸¦æœ‰å„è‡ªçš„å†…å®¹ç±»å‹å’Œé…ç½®
<code>----WebKit.... Content-Disposition:form-data;name=&quot;firstname&quot; sau sheong</code></p>
<h3 id="åˆ†æå­—æ®µ">åˆ†æå­—æ®µ
</h3><blockquote>
<p>ä»¥ä¸‹ä¸‰è€…å›´ç»•ç€è¿”å›å€¼å’Œè¡¨å•å±æ€§è¿›è¡ŒåŒºåˆ†
requset å°† url/ä¸»ä½“ç­‰æå–åˆ° form/postform/multipartform å­—æ®µä¸­ï¼Œè°ƒç”¨ parseform æ–¹æ³•æˆ–è€… parsemultipartform æ–¹æ³•è¿›è¡Œè§£æ</p>
</blockquote>
<p>Form å­—æ®µ
r.ParseForm()
fmt.Fprintln(w, r.Form)
å°†è·å¾—ä¸€ä¸ªåˆ‡ç‰‡ï¼ŒåŒ…å«é”®çš„è¡¨å•å€¼æˆ–è€… URL å€¼
<code>map[thread:[123] hello:[sau sheong world] post:[456]]</code></p>
<p>PostForm å­—æ®µ
r.PostForm()
å°†è·å¾—ä¸€ä¸ªé”®çš„è¡¨å•å€¼ä¸åŒ…å« URL å€¼
åªæ”¯æŒ urlencoded ç¼–ç </p>
<p>application/x-www-form-urlencoded ä¸‹ PostFormï¼Œè·å¾—è¡¨å•å€¼
<code>map[post:[456] hello:[sau sheong]]</code></p>
<p>ä¿®æ”¹æˆ multipart/form-data ä¸‹ä½¿ç”¨å› r.Formï¼Œè·å¾— url å€¼
<code>map[hello:[world] thread:[123]]</code></p>
<p>MutipartForm å­—æ®µ
åªåŒ…å«è¡¨å•ä¸åŒ…å« URL é”®å€¼å¯¹ï¼ŒåŒ…å«ä¸¤ä¸ªæ˜ å°„ï¼Œä¸€ä¸ªä¸ºå­—ç¬¦ä¸²ç»„æˆåˆ‡ç‰‡ï¼Œä¸€ä¸ªä¸ºç©ºï¼Œä¸ºä¸Šä¼ æ–‡ä»¶</p>
<p>r.ParseMultipartForm(1024)
fmt.Fprintln(w, r.MultipartForm)</p>
<p><code>&amp;{map[hello:[sau sheong] post:[456]] map[]}</code></p>
<p>FormValue å­—æ®µ
å…è®¸ç›´æ¥è®¿é—®ä¸ç»™å®šé”®ç›¸å…³è”çš„å€¼
FormValue è‡ªåŠ¨è°ƒç”¨ ParseForm æˆ– ParseMultipartForm æ–¹æ³•ï¼Œä½†æŒ‡æŒ¥ä» Form ç»“æ„å–å‡ºç»™å®šé”®çš„ç¬¬ä¸€ä¸ªå€¼ï¼Œè¦è·å–å…¨éƒ¨éœ€è¦ç›´æ¥è®¿é—® Form ç»“æ„</p>
<p>PostFormValue å­—æ®µ
PostFormValue åŒç†ï¼Œåªä¼šè¿”å›è¡¨å•ä¸ä¼šè¿”å› urlï¼Œä¸¤è€…éƒ½åªæ”¯æŒ application/x-www-form-urlencodedï¼Œåœ¨ multipart/form-data ä¸­ä¸ä¼šå¾—åˆ°ä»»ä½•ç»“æœ
multipart/form-data æ—¶ï¼Œæ•°æ®è¢«å­˜å‚¨åˆ° MultipartForm å­—æ®µä¸­è€Œä¸æ˜¯ Form å­—æ®µå’Œ PostForm å­—æ®µ</p>
<p>ä¸Šä¼ æ–‡ä»¶
å‰ç«¯
<code>enctype=&quot;multipart/form-data&quot;</code>
<code>&lt;input type=&quot;file&quot; name=&quot;uploaded&quot;&gt;</code></p>
<p>åç«¯</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-gdscript3" data-lang="gdscript3"><span class="line"><span class="cl"><span class="n">r</span><span class="o">.</span><span class="n">ParseMultipartForm</span><span class="p">(</span><span class="mi">1024</span><span class="p">)</span>
</span></span><span class="line"><span class="cl"><span class="n">fileHeader</span> <span class="p">:</span><span class="o">=</span> <span class="n">r</span><span class="o">.</span><span class="n">MultipartForm</span><span class="o">.</span><span class="n">File</span><span class="p">[</span><span class="s2">&#34;uploaded][0]</span>
</span></span><span class="line"><span class="cl"><span class="n">file</span><span class="p">,</span> <span class="n">err</span> <span class="p">:</span><span class="o">=</span> <span class="n">fileHeader</span><span class="o">.</span><span class="n">Open</span><span class="p">()</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>æ‰§è¡Œ ParseMultipartForm æ–¹æ³•ï¼Œä» MultipartForm çš„ File å–å‡º fileHeaderï¼Œç„¶åé€šè¿‡è°ƒç”¨æ–‡ä»¶å¤´çš„ Open æ–¹æ³•æ‰“å¼€æ–‡ä»¶ï¼ŒæœåŠ¡å™¨ä¼šå°†æ–‡ä»¶çš„å†…å®¹è¯»å–åˆ°ä¸€ä¸ªå­—èŠ‚æ•°ç»„ä¸­ï¼Œå¹¶å°†è¿™ä¸ªå­—èŠ‚æ•°ç»„çš„å†…å®¹æ‰“å°å‡ºæ¥ï¼Œçº¯æ–‡æœ¬æ–‡ä»¶ä¼šæŠŠè¿™ä¸ªæ–‡ä»¶å†…å®¹æ‰“å°åœ¨æµè§ˆå™¨ä¸Š
FormFile å¯ä»¥è¿”å›ç»™å®šé”®çš„ç¬¬ä¸€ä¸ªå€¼ï¼Œè¿”å›æ–‡ä»¶å’Œæ–‡ä»¶å¤´</p>
<p>ParseForm æ–¹æ³•æ— æ³•ä» Angular å®¢æˆ·ç«¯å‘é€ POST è¯·æ±‚ä¸­è·å– JSON æ•°æ®ï¼Œä½¿ç”¨çš„æ˜¯ application/jsonï¼ŒParseForm æ–¹æ³•åªå¯¹è¡¨å•æ•°æ®è¿›è¡Œåˆ†æ</p>
<p>ResponseWriter
å®é™…ä¸Š ResponseWriter å°±æ˜¯ response è¿™ä¸ªéå¯¼å‡ºç»“æ„çš„æ¥å£ï¼Œä¼ é€’çš„ä¹Ÿæ˜¯æŒ‡å‘ response ç»“æ„çš„æŒ‡é’ˆï¼ŒåŒ…å« Write/WriteHeader/Header ä¸‰ä¸ªæ–¹æ³•
Write å¯ä»¥å°† HTML å­—ç¬¦ä¸²å†™å…¥ HTTP å“åº”ä¸»é¢˜ä¸­
WriteHeader æ¥å—ä¸€ä¸ªä»£è¡¨ HTTP å“åº”çŠ¶æ€ç çš„æ•´æ•°ä½œä¸ºå‚æ•°ï¼Œå¹¶å°†è¿™ä¸ªæ•´æ•°ç”¨ä½œ HTTP å“åº”çš„è¿”å›çŠ¶æ€ç ï¼Œç”¨æˆ·å¯ä»¥ç»§ç»­å¯¹ ResponseWriter è¿›è¡Œå†™å…¥ä½†æ˜¯ä¸èƒ½å¯¹å“åº”çš„é¦–éƒ¨åšä»»ä½•å†™å…¥
Header å–å¾—ä¸€ä¸ªç”±é¦–éƒ¨ç»„æˆçš„æ˜ å°„ï¼Œä¿®æ”¹æ˜ å°„å¯ä»¥ä¿®æ”¹é¦–éƒ¨ï¼Œä¿®æ”¹åçš„é¦–éƒ¨å°†è¢«åŒ…å«åœ¨ HTTP å“åº”é‡Œé¢ï¼Œå¹¶éšç€å“åº”ä¸€åŒå‘é€è‡³å®¢æˆ·ç«¯</p>
<p>é‡å®šå‘æ–¹æ³•
<code>w.Header().Set(&quot;Location&quot;, &quot;http://www.baidu.com&quot;)</code>
<code>w.WriteHeader(302)</code>
ç»™å“åº”é¦–éƒ¨æ·»åŠ ä¸€ä¸ª Locationï¼Œå¹¶è®¾ç½®ä¸ºé‡å®šå‘ç›®çš„åœ°ï¼ŒWriteHeader æ‰§è¡Œåä¸å†å…è®¸å†™å…¥</p>
<p>Cookie
é™¤äº† Expires å­—æ®µï¼Œè¿˜æœ‰ MaxAge å­—æ®µ</p>
<p>è®¾ç½® cookie</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback"><span class="line"><span class="cl">w.Header().Set(&#34;Set-Cookie&#34;, c1.String())
</span></span><span class="line"><span class="cl">w.Header().Add(&#34;Set-Cookie&#34;, c2.String())
</span></span><span class="line"><span class="cl">http.SetCook(w, &amp;c1) //ä¼ é€’æŒ‡å‘Cookieç»“æ„çš„æŒ‡é’ˆ
</span></span></code></pre></td></tr></table>
</div>
</div><p>cookie å®ç°é—ªç°æ¶ˆæ¯
c := http.Cookie{
Name: &ldquo;flash&rdquo;,
Value:base64.URLEncoding.EncodeToString(msg)
}</p>
<p>rc := http.Cookie{
Name: &ldquo;flash&rdquo;
MaxAge: -1
Expires: time.Unix(1, 0)
}
val, _ := base64.URLEncoding.DecodeString(c.Value)</p>
<p>é€šè¿‡å®Œå…¨ç§»é™¤ cookieï¼Œç¨‹åºå¯¹æ—§ cookie è§£ç å¹¶è¿”å›</p>
<h2 id="5-æ¨¡æ¿å¼•æ“">5. æ¨¡æ¿å¼•æ“
</h2><p>æ— é€»è¾‘æ¨¡æ¿å¼•æ“ï¼Œå°†æ¨¡æ¿ä¸­æŒ‡å®šçš„å ä½ç¬¦æ›¿æ¢æˆç›¸åº”çš„åŠ¨æ€æ•°æ®ï¼Œå®Œå…¨åˆ†ç¦»ç¨‹åºçš„è¡¨ç°å’Œé€»è¾‘ï¼Œè®¡ç®—äº¤ç»™å¤„ç†å™¨å®Œæˆ</p>
<p>åµŒå…¥é€»è¾‘çš„æ¨¡æ¿å¼•æ“ï¼Œå°†ç¼–ç¨‹è¯­è¨€åµŒå…¥æ¨¡æ¿å¹¶åœ¨æ¨¡æ¿å¼•æ“æ¸²æŸ“æ¨¡æ¿æ—¶ï¼Œç”±ä»£ç è¿›è¡Œç›¸åº”çš„å­—ç¬¦ä¸²æ›¿æ¢</p>
<p>æ¨¡æ¿ä¸­é»˜è®¤åŠ¨ä½œä½¿ç”¨{{}}åŒ…å›´ï¼Œè€Œç‚¹(.)æ˜¯ä¸€ä¸ªåŠ¨ä½œï¼Œæ¨¡æ¿å¼•æ“æ‰§è¡Œæ¨¡æ¿æ—¶ï¼Œä½¿ç”¨ä¸€ä¸ªå€¼å»æ›¿æ¢åŠ¨ä½œæœ¬èº«
æ­¥éª¤ï¼š
(1) å¯¹æ–‡æœ¬æ ¼å¼æ¨¡æ¿æºè¿›è¡Œè¯­æ³•åˆ†æï¼Œåˆ›å»ºä¸€ä¸ªç»è¿‡è¯­æ³•åˆ†æçš„æ¨¡æ¿ç»“æ„ï¼Œæ¨¡æ¿æºæ—¢å¯ä»¥æ˜¯ä¸€ä¸ªå­—ç¬¦ä¸²ï¼Œä¹Ÿå¯ä»¥æ˜¯æ¨¡æ¿æ–‡ä»¶ä¸­åŒ…å«çš„å†…å®¹ï¼›
(2) æ‰§è¡Œç»è¿‡è¯­æ³•åˆ†æçš„æ¨¡æ¿ï¼Œå°† ResponseWriter å’Œæ¨¡æ¿æ‰€éœ€çš„åŠ¨æ€æ•°æ®ä¼ é€’ç»™æ¨¡æ¿å¼•æ“ï¼Œè¢«è°ƒç”¨çš„æ¨¡æ¿å¼•æ“ä¼šæŠŠç»è¿‡è¯­æ³•åˆ†æçš„æ¨¡æ¿å’Œä¼ å…¥çš„æ•°æ®ç»“åˆèµ·æ¥ï¼Œç”Ÿæˆå‡ºæœ€ç»ˆçš„ HTMLï¼Œå¹¶å°†è¿™äº› HTML ä¼ é€’ç»™ ResponseWriter</p>
<p><code>t, _ := template.ParseFiles(&quot;tmpl.html&quot;)</code>
<code>t.Execute(w, &quot;Hello World!&quot;)</code>
ç­‰åŒäº
<code>t := template.New(&quot;tmpl.html&quot;)</code>
<code>t, _ := t.ParseFiles(&quot;tmpl.html')</code></p>
<p>ParseFiles å¯ä»¥æ¥å—å¤šä¸ªæ–‡ä»¶åä½œä¸ºå‚æ•°ï¼Œå˜æˆé›†åˆï¼Œä½†åªè¿”å›ç¬¬ä¸€ä¸ªæ–‡ä»¶çš„å·²åˆ†ææ¨¡æ¿
ParseGlob ä¼šå¯¹åŒ¹é…ç»™å®šæ¨¡å¼çš„æ‰€æœ‰æ–‡ä»¶è¿›è¡Œè¯­æ³•åˆ†æ
<code>t, _ := template.ParseGlob(&quot;*.html&quot;)</code></p>
<p>å¤„ç†åˆ†ææ¨¡æ¿æ—¶å‡ºç°çš„é”™è¯¯
<code>t := template.Must(template.ParseFiles(&quot;tmpl.html&quot;))</code>
Must å‡½æ•°å¯ä»¥åŒ…è£¹èµ·ä¸€ä¸ªå‡½æ•°ï¼Œè¿”å›ä¸€ä¸ªæŒ‡å‘æ¨¡æ¿çš„æŒ‡é’ˆå’Œä¸€ä¸ªé”™è¯¯ï¼Œå¦‚æœä¸æ˜¯ nil åˆ™äº§ç”Ÿ panic
panic ä¼šç»ˆæ­¢æ­£å¸¸æµç¨‹ï¼Œå¦‚æœ panic æ˜¯å†…éƒ¨å‡½æ•°äº§ç”Ÿé‚£ä¼šè¿”å›ç»™è°ƒç”¨è€…ï¼Œä¸€ç›´å‘è°ƒç”¨æ ˆçš„ä¸Šæ–¹ä¼ é€’ï¼Œç›´åˆ° main å‡½æ•°</p>
<p>å¦‚æœæƒ³æ‰§è¡Œåˆ«çš„æ¨¡æ¿éœ€è¦
<code>t.ExecuteTemplate(w, &quot;t2.html&quot;, &quot;Hello World&quot;)</code></p>
<p>åŠ¨ä½œ
æ¡ä»¶åŠ¨ä½œ/è¿­ä»£åŠ¨ä½œ/è®¾ç½®åŠ¨ä½œ/åŒ…å«åŠ¨ä½œ</p>
<p>t.Execute(w, )è´Ÿè´£ä¼ å…¥</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback"><span class="line"><span class="cl">{{if .}} action
</span></span><span class="line"><span class="cl">{{else}} action
</span></span><span class="line"><span class="cl">{{end}}
</span></span></code></pre></td></tr></table>
</div>
</div><div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback"><span class="line"><span class="cl">{{range .}}
</span></span><span class="line"><span class="cl">&lt;li&gt;{{.}}&lt;/li&gt;
</span></span><span class="line"><span class="cl">{{else}} action
</span></span><span class="line"><span class="cl">{{end}}
</span></span></code></pre></td></tr></table>
</div>
</div><div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback"><span class="line"><span class="cl">{{with arg}}
</span></span><span class="line"><span class="cl">åˆ°endä¹‹é—´.ä¼šå˜æˆargçš„å†…å®¹
</span></span><span class="line"><span class="cl">{{else}} action
</span></span><span class="line"><span class="cl">å¦‚æœargä¸ºç©ºï¼Œåˆ™ä¼šæ›¿æ¢æˆelse
</span></span><span class="line"><span class="cl">{{end}}
</span></span></code></pre></td></tr></table>
</div>
</div><p>åŒ…å«å¦ä¸€ä¸ªæ¨¡æ¿
{{template &ldquo;name&rdquo;}}</p>
<p>ParseFiles ç¬¬ä¸€ä¸ªå‚æ•°æœ‰ç‰¹æ®Šä½œç”¨ï¼Œä¼ é€’ç»™ç¬¬äºŒä¸ªæ¨¡æ¿éœ€è¦ç”¨{{template &ldquo;t2.html&rdquo; .}}ï¼Œå¯ä»¥æŠŠ t1.html çš„{{.}}ä¼ é€’ç»™ t2.html</p>
<p>å˜é‡$variable := value
ç®¡é“å¯ä»¥ä¼ é€’ç»™ä¸‹ä¸€ä¸ªå‚æ•°</p>
<p>è‡ªå®šä¹‰æ¨¡æ¿å‡½æ•°
(1)åˆ›å»ºä¸€ä¸ªåä¸º FuncMap æ˜ å°„å¹¶å°†æ˜ å°„çš„é”®è®¾ç½®ä¸ºå‡½æ•°åå­—ï¼Œè€Œæ˜ å°„çš„å€¼åˆ™è®¾ç½®ä¸ºå®é™…å®šä¹‰å‡½æ•°
(2)å°† FuncMap ä¸æ¨¡æ¿è¿›è¡Œç»‘å®š
ç”¨æˆ·å¸¸å¸¸éœ€è¦å°†æ—¶é—´å¯¹è±¡æˆ–æ—¥æœŸè½¬æ¢ä¸º ISO8601 æ ¼å¼çš„æ—¶é—´å­—ç¬¦ä¸²æˆ–è€…æ—¥æœŸå­—ç¬¦ä¸²</p>
<p>å®šä¹‰å‡½æ•°è¿”å› t.Format(layout),å¤„ç†å™¨ä¸­åˆ›å»ºä¸€ä¸ªå˜é‡åä¸º funcMapï¼Œä½¿ç”¨ç»“æ„å°†åå­— fdate æ˜ å°„è‡³ formatDate å‡½æ•°ï¼Œtemplate.New å‡½æ•°åˆ›å»ºä¸€ä¸ªåä¸º tmpl.html çš„æ¨¡æ¿ï¼ŒfuncMap ä¼ é€’ç»™ template.New è¿”å›è¢«åˆ›å»ºæ¨¡æ¿è¿›è¡Œç»‘å®šï¼Œå¯¹ tmpl.html è¿›è¡Œè¯­æ³•åˆ†æï¼Œå°† ResponseWriter ä»¥åŠå½“å‰æ—¶é—´ä¼ é€’ç»™æ¨¡æ¿</p>
<p><code>funcMap := template.FuncMap{&quot;fdate&quot;: formatDate}</code>
<code>t := template.New(&quot;tmpl.html&quot;).Funcs(funcMap)</code>
<code>t, _ = t.ParseFiles(&quot;tmpl.html&quot;)</code>
<code>t.Execute(w, time.Now())</code></p>
<p>ä¸Šä¸‹æ–‡æ„ŸçŸ¥ï¼Œå¯¹ HTML/JS ç­‰è¿›è¡Œè½¬ä¹‰
<code>w.Header().Set(&quot;X-XSS-Protection&quot;, &quot;0&quot;)</code></p>
<p>ä»‹äºæ ‡ç­¾ä¹‹é—´çš„å†…å®¹å°±æ˜¯ layout æ¨¡æ¿
{{define &ldquo;layout&rdquo;}}
{{end}}</p>
<p><code>t.ExecuteTemplate(w, &quot;layout&quot;, &quot;&quot;)</code></p>
<p>å—åŠ¨ä½œå®šä¹‰é»˜è®¤æ¨¡æ¿ï¼Œå¯ä»¥å°† content æ”¾ç½®åˆ° layout ä¸­
{{block arg}}
{{end}}</p>
<h3 id="æ„å»ºè¿è¡Œ">æ„å»ºè¿è¡Œ
</h3><p>1.å°†æ–‡ä»¶å¤¹å¤åˆ¶åˆ°&quot;C:\Program Files\Go\src&quot;ä¸­ 2.ç®¡ç†å‘˜æƒé™å¼€ cmd è¿è¡Œ go install ç›®å½•å 3.å¯ä»¥åœ¨ bin ç›®å½•é‡Œæ‰¾åˆ° exeï¼Œè¿è¡Œ</p>
<p>å¸¸è§é—®é¢˜ï¼š
ç«¯å£è¢«å ç”¨æ— æ³•è¿è¡Œ
netstat -ano | findstr æŸ¥çœ‹ç«¯å£
taskkill /PID pid /f å…³é—­ç«¯å£</p>
<p>curl -i è¿”å›è¯·æ±‚å¤´
-d æäº¤ Post</p>
<h3 id="å­˜å‚¨æ•°æ®">å­˜å‚¨æ•°æ®
</h3><p>gob ä¸€ç§èƒ½å­˜å‚¨åœ¨æ–‡ä»¶é‡Œé¢çš„äºŒè¿›åˆ¶æ ¼å¼ï¼Œå¯ä»¥å¿«é€Ÿé«˜æ•ˆåœ°å°†å†…å­˜ä¸­çš„æ•°æ®åºåˆ—åŒ–åˆ°ä¸€ä¸ªæˆ–å¤šä¸ªæ–‡ä»¶é‡Œé¢</p>
<p>io/ioutill åº“
ç”¨ WriteFile å’Œ ReadFile å¯¹æ–‡ä»¶è¿›è¡Œå†™å…¥è¯»å–</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback"><span class="line"><span class="cl">ioutill.WriteFile(&#34;data1&#34;, data, 0644)
</span></span><span class="line"><span class="cl">read1, _ := ioutil.ReadFile(&#34;data1&#34;)
</span></span></code></pre></td></tr></table>
</div>
</div><p>å†™å…¥ç¨‹åºä¼šå°†æ–‡ä»¶çš„åå­—/æ•°æ®ä»¥åŠæƒé™ä¼ å…¥
è¯»å–å°†æ–‡ä»¶ååšå‚ï¼Œè¿”å›ä¸€ä¸ªç”±å­—èŠ‚ç»„æˆçš„åˆ‡ç‰‡</p>
<p>os åº“
é€šè¿‡ File ç»“æ„å¯¹æ–‡ä»¶è¿›è¡Œå†™å…¥è¯»å–</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span><span class="lnt">7
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback"><span class="line"><span class="cl">file1, _ := os.Create(&#34;data2&#34;)
</span></span><span class="line"><span class="cl">defer file1.Close()
</span></span><span class="line"><span class="cl">bytes, _ := file1.Write(data)
</span></span><span class="line"><span class="cl">file2, _ := os.Open(&#34;data2&#34;)
</span></span><span class="line"><span class="cl">defer file2.Close()
</span></span><span class="line"><span class="cl">read2 := make([]byte, len(data))
</span></span><span class="line"><span class="cl">bytes, _ = file2.Read(read2)
</span></span></code></pre></td></tr></table>
</div>
</div><p>Create å‡º file æ–‡ä»¶åè¿›è¡Œå†™å…¥ï¼ŒOpen æ–‡ä»¶åè¿›è¡Œ read</p>
<h4 id="csv-å¤„ç†">CSV å¤„ç†
</h4><p>åˆ›å»ºå†™å…¥å™¨ï¼ŒæŠŠæ•°æ®åˆ›å»ºä¸ºä¸€ä¸ªç”±å­—ç¬¦ä¸²ç»„æˆçš„åˆ‡ç‰‡ï¼ŒFlush æ–¹æ³•ä¿è¯ç¼“å†²åŒºæ•°æ®å†™å…¥</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback"><span class="line"><span class="cl">writer := csv.NewWriter(csvFile)
</span></span><span class="line"><span class="cl">...
</span></span><span class="line"><span class="cl">writer.Flush()
</span></span></code></pre></td></tr></table>
</div>
</div><p>æ‰“å¼€ csv æ–‡ä»¶ï¼Œå°† FieldsPerRecord å­—æ®µè®¾ä¸º-1ï¼Œå³ä½¿è¯»å–æ—¶ç¼ºå°‘å­—æ®µä¹Ÿä¸ä¼šä¸­æ–­ï¼Œä¸ºæ­£æ•°æ—¶ï¼Œå­—æ®µæ•°é‡å°‘äºå€¼ä¼šæŠ¥é”™ï¼Œä¸º 0 æ—¶ï¼Œè¯»å–ç¬¬ä¸€æ¡è®°å½•çš„å­—æ®µæ•°é‡æœªä½œå€¼ï¼Œåœ¨ä½¿ç”¨ readall ä¸€æ¬¡æ€§è¯»å–æ‰€æœ‰è®°å½•</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span><span class="lnt">7
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback"><span class="line"><span class="cl">file, err := os.Open(&#34;csv&#34;)
</span></span><span class="line"><span class="cl">...
</span></span><span class="line"><span class="cl">defer file.Close()
</span></span><span class="line"><span class="cl">reader := csv.NewReader(file)
</span></span><span class="line"><span class="cl">reader.FiledsPerRecord = -1
</span></span><span class="line"><span class="cl">record, err := reader.ReadAll()
</span></span><span class="line"><span class="cl">...
</span></span></code></pre></td></tr></table>
</div>
</div><h4 id="gob-åŒ…">gob åŒ…
</h4><p>é€šè¿‡äºŒè¿›åˆ¶è¯»å–å­˜å‚¨æ•°æ®
å­˜å‚¨æ•°æ®</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-gdscript3" data-lang="gdscript3"><span class="line"><span class="cl"><span class="k">func</span> <span class="n">store</span><span class="p">(</span><span class="n">data</span> <span class="n">interface</span><span class="p">{},</span> <span class="n">filename</span> <span class="n">string</span><span class="p">){</span>
</span></span><span class="line"><span class="cl">    <span class="n">buffer</span> <span class="p">:</span><span class="o">=</span> <span class="n">new</span><span class="p">(</span><span class="n">bytes</span><span class="o">.</span><span class="n">Buffer</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">    <span class="n">encoder</span> <span class="p">:</span><span class="o">=</span> <span class="n">gob</span><span class="o">.</span><span class="n">NewEncoder</span><span class="p">(</span><span class="n">buffer</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">    <span class="o">...</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>è½½å…¥æ•°æ®</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-gdscript3" data-lang="gdscript3"><span class="line"><span class="cl"><span class="k">func</span> <span class="nb">load</span><span class="p">(</span><span class="n">data</span> <span class="n">interface</span><span class="p">{},</span> <span class="n">filename</span> <span class="n">string</span><span class="p">){</span>
</span></span><span class="line"><span class="cl">    <span class="n">raw</span><span class="p">,</span> <span class="n">err</span> <span class="p">:</span><span class="o">=</span> <span class="n">ioutil</span><span class="o">.</span><span class="n">ReadFile</span><span class="p">(</span><span class="n">filename</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">    <span class="n">buffer</span> <span class="p">:</span><span class="o">=</span> <span class="n">bytes</span><span class="o">.</span><span class="n">NewBuffer</span><span class="p">(</span><span class="n">raw</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">    <span class="n">dec</span> <span class="p">:</span><span class="o">=</span> <span class="n">dec</span><span class="o">.</span><span class="n">Decode</span><span class="p">(</span><span class="n">data</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">    <span class="o">...</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span></code></pre></td></tr></table>
</div>
</div><h4 id="postgres-crud">Postgres CRUD
</h4><p>å¯¼å…¥é©±åŠ¨ï¼Œè°ƒç”¨åº“
<code>_ &quot;github.com/lib/pq&quot;</code>
<code>&quot;database/sql&quot;</code>
éšå½¢è°ƒç”¨ sql.Register(&ldquo;postgres&rdquo;, &amp;drv{})</p>
<p>åˆ›å»ºç”¨æˆ·ï¼Œ-P å¯†ç ï¼Œ-d æƒé™
<code>createuser -P -d gwp</code></p>
<p>åˆ›å»ºæ•°æ®åº“
<code>createdb gwp</code></p>
<p>åˆ›å»ºè¡¨æ ¼
<code>psql -U gwp -f setup.sql -d gwp</code></p>
<p>è¿æ¥æ•°æ®åº“
<code>Db, err = sql.Open(exe, user dbname password sslmode)</code></p>
<blockquote>
<p>å¦‚æœå¯†ç ä¸å¯¹ï¼Œåˆ™ä¼šäº§ç”Ÿæƒé™é—®é¢˜ï¼Œæ— æ³•å¯¹æ•°æ®åº“è¿›è¡Œæ“ä½œ
defer Db.Close()æ”¾åœ¨ main å‡½æ•°ä¸­å¦åˆ™å ç”¨èµ„æº
æƒ°æ€§è¿æ¥</p>
</blockquote>
<p><a class="link" href="https://developer.aliyun.com/article/178898#slide-6"  target="_blank" rel="noopener"
    >è¯¦ç»†è¯´æ˜</a>
æœ‰äº† sql.DB å®ä¾‹ä¹‹åå°±å¯ä»¥å¼€å§‹æ‰§è¡ŒæŸ¥è¯¢è¯­å¥äº†ã€‚</p>
<p>Go å°†æ•°æ®åº“æ“ä½œåˆ†ä¸ºä¸¤ç±»ï¼šQuery ä¸ Execã€‚ä¸¤è€…çš„åŒºåˆ«åœ¨äºå‰è€…ä¼šè¿”å›ç»“æœï¼Œè€Œåè€…ä¸ä¼šã€‚</p>
<ul>
<li>Query è¡¨ç¤ºæŸ¥è¯¢ï¼Œå®ƒä¼šä»æ•°æ®åº“è·å–æŸ¥è¯¢ç»“æœï¼ˆä¸€ç³»åˆ—è¡Œï¼Œå¯èƒ½ä¸ºç©ºï¼‰ã€‚</li>
<li>Exec è¡¨ç¤ºæ‰§è¡Œè¯­å¥ï¼Œå®ƒä¸ä¼šè¿”å›è¡Œã€‚</li>
</ul>
<p>æ­¤å¤–è¿˜æœ‰ä¸¤ç§å¸¸è§çš„æ•°æ®åº“æ“ä½œæ¨¡å¼ï¼š</p>
<ul>
<li>QueryRow è¡¨ç¤ºåªè¿”å›ä¸€è¡Œçš„æŸ¥è¯¢ï¼Œä½œä¸º Query çš„ä¸€ä¸ªå¸¸è§ç‰¹ä¾‹ã€‚</li>
<li>Prepare è¡¨ç¤ºå‡†å¤‡ä¸€ä¸ªéœ€è¦å¤šæ¬¡ä½¿ç”¨çš„è¯­å¥ï¼Œä¾›åç»­æ‰§è¡Œç”¨</li>
</ul>
<p>Scan æ–¹æ³•æŠŠè¡Œä¸­çš„å€¼å¤åˆ¶åˆ°ç¨‹åºä¸ºå…¶æä¾›çš„å‚æ•°é‡Œé¢ï¼Œä¸€èˆ¬ä¸ QueryRow æ­é…ä½¿ç”¨</p>
<p>æŸ¥è¯¢æ•°æ®ï¼Œä¼ å…¥ limit é™åˆ¶è¡Œæ•°</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-gdscript3" data-lang="gdscript3"><span class="line"><span class="cl"><span class="k">func</span> <span class="n">Posts</span><span class="p">(</span><span class="n">limit</span> <span class="ne">int</span><span class="p">)</span> <span class="p">(</span><span class="n">posts</span> <span class="p">[]</span><span class="n">Post</span><span class="p">,</span> <span class="n">err</span> <span class="n">error</span><span class="p">)</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">	<span class="n">rows</span><span class="p">,</span> <span class="n">err</span> <span class="p">:</span><span class="o">=</span> <span class="n">Db</span><span class="o">.</span><span class="n">Query</span><span class="p">(</span><span class="s2">&#34;select id, content, author from posts limit $1&#34;</span><span class="p">,</span> <span class="n">limit</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">	<span class="k">if</span> <span class="n">err</span> <span class="o">!=</span> <span class="n">nil</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">		<span class="k">return</span>
</span></span><span class="line"><span class="cl">	<span class="p">}</span>
</span></span><span class="line"><span class="cl">	<span class="k">for</span> <span class="n">rows</span><span class="o">.</span><span class="n">Next</span><span class="p">()</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">		<span class="n">post</span> <span class="p">:</span><span class="o">=</span> <span class="n">Post</span><span class="p">{}</span>
</span></span><span class="line"><span class="cl">		<span class="n">err</span> <span class="o">=</span> <span class="n">rows</span><span class="o">.</span><span class="n">Scan</span><span class="p">(</span><span class="o">&amp;</span><span class="n">post</span><span class="o">.</span><span class="n">Id</span><span class="p">,</span> <span class="o">&amp;</span><span class="n">post</span><span class="o">.</span><span class="n">Content</span><span class="p">,</span> <span class="o">&amp;</span><span class="n">post</span><span class="o">.</span><span class="n">Author</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">		<span class="k">if</span> <span class="n">err</span> <span class="o">!=</span> <span class="n">nil</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">			<span class="k">return</span>
</span></span><span class="line"><span class="cl">		<span class="p">}</span>
</span></span><span class="line"><span class="cl">		<span class="n">posts</span> <span class="o">=</span> <span class="n">append</span><span class="p">(</span><span class="n">posts</span><span class="p">,</span> <span class="n">post</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">	<span class="p">}</span>
</span></span><span class="line"><span class="cl">	<span class="n">rows</span><span class="o">.</span><span class="n">Close</span><span class="p">()</span>
</span></span><span class="line"><span class="cl">	<span class="k">return</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>å•ä¸€æŸ¥è¯¢</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-gdscript3" data-lang="gdscript3"><span class="line"><span class="cl"><span class="k">func</span> <span class="n">GetPost</span><span class="p">(</span><span class="n">id</span> <span class="ne">int</span><span class="p">)</span> <span class="p">(</span><span class="n">post</span> <span class="n">Post</span><span class="p">,</span> <span class="n">err</span> <span class="n">error</span><span class="p">)</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">	<span class="n">post</span> <span class="o">=</span> <span class="n">Post</span><span class="p">{}</span>
</span></span><span class="line"><span class="cl">	<span class="n">err</span> <span class="o">=</span> <span class="n">Db</span><span class="o">.</span><span class="n">QueryRow</span><span class="p">(</span><span class="s2">&#34;select id, content, author from posts where id = $1&#34;</span><span class="p">,</span> <span class="n">id</span><span class="p">)</span><span class="o">.</span><span class="n">Scan</span><span class="p">(</span><span class="o">&amp;</span><span class="n">post</span><span class="o">.</span><span class="n">Id</span><span class="p">,</span> <span class="o">&amp;</span><span class="n">post</span><span class="o">.</span><span class="n">Content</span><span class="p">,</span> <span class="o">&amp;</span><span class="n">post</span><span class="o">.</span><span class="n">Author</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">	<span class="k">return</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>å¢åŠ </p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-gdscript3" data-lang="gdscript3"><span class="line"><span class="cl"><span class="k">func</span> <span class="p">(</span><span class="n">post</span> <span class="o">*</span><span class="n">Post</span><span class="p">)</span> <span class="n">Create</span><span class="p">()</span> <span class="p">(</span><span class="n">err</span> <span class="n">error</span><span class="p">)</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">	<span class="n">statement</span> <span class="p">:</span><span class="o">=</span> <span class="s2">&#34;insert into posts (content, author) values ($1, $2) returning id&#34;</span>
</span></span><span class="line"><span class="cl">	<span class="n">stmt</span><span class="p">,</span> <span class="n">err</span> <span class="p">:</span><span class="o">=</span> <span class="n">Db</span><span class="o">.</span><span class="n">Prepare</span><span class="p">(</span><span class="n">statement</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">	<span class="k">if</span> <span class="n">err</span> <span class="o">!=</span> <span class="n">nil</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">		<span class="k">return</span>
</span></span><span class="line"><span class="cl">	<span class="p">}</span>
</span></span><span class="line"><span class="cl">	<span class="n">defer</span> <span class="n">stmt</span><span class="o">.</span><span class="n">Close</span><span class="p">()</span>
</span></span><span class="line"><span class="cl">	<span class="n">err</span> <span class="o">=</span> <span class="n">stmt</span><span class="o">.</span><span class="n">QueryRow</span><span class="p">(</span><span class="n">post</span><span class="o">.</span><span class="n">Content</span><span class="p">,</span> <span class="n">post</span><span class="o">.</span><span class="n">Author</span><span class="p">)</span><span class="o">.</span><span class="n">Scan</span><span class="p">(</span><span class="o">&amp;</span><span class="n">post</span><span class="o">.</span><span class="n">Id</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">	<span class="k">return</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>åˆ é™¤</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-gdscript3" data-lang="gdscript3"><span class="line"><span class="cl"><span class="k">func</span> <span class="p">(</span><span class="n">post</span> <span class="o">*</span><span class="n">Post</span><span class="p">)</span> <span class="n">Delete</span><span class="p">()</span> <span class="p">(</span><span class="n">err</span> <span class="n">error</span><span class="p">)</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">	<span class="n">_</span><span class="p">,</span> <span class="n">err</span> <span class="o">=</span> <span class="n">Db</span><span class="o">.</span><span class="n">Exec</span><span class="p">(</span><span class="s2">&#34;delete from posts where id = $1&#34;</span><span class="p">,</span> <span class="n">post</span><span class="o">.</span><span class="n">Id</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">	<span class="k">return</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>æ”¹å˜</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-gdscript3" data-lang="gdscript3"><span class="line"><span class="cl"><span class="k">func</span> <span class="p">(</span><span class="n">post</span> <span class="o">*</span><span class="n">Post</span><span class="p">)</span> <span class="n">Update</span><span class="p">()</span> <span class="p">(</span><span class="n">err</span> <span class="n">error</span><span class="p">)</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">	<span class="n">_</span><span class="p">,</span> <span class="n">err</span> <span class="o">=</span> <span class="n">Db</span><span class="o">.</span><span class="n">Exec</span><span class="p">(</span><span class="s2">&#34;update posts set content = $2, author = $3 where id = $1&#34;</span><span class="p">,</span> <span class="n">post</span><span class="o">.</span><span class="n">Id</span><span class="p">,</span> <span class="n">post</span><span class="o">.</span><span class="n">Content</span><span class="p">,</span> <span class="n">post</span><span class="o">.</span><span class="n">Author</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">	<span class="k">return</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>å°è¯•å°†å…¶ä»–æœç´¢æ¡ä»¶ä¼ å…¥ï¼Œè¿”å› id å€¼</p>
<h2 id="7go-web">7.go web
</h2><p>SOAP
å“åº”æŠ¥æ–‡ç”± WSDL ç”Ÿæˆçš„ SOAP æœåŠ¡å™¨è´Ÿè´£ï¼Œæ¯æ¬¡ä¿®æ”¹æœåŠ¡å™¨ï¼Œå³ä½¿æ˜¯ä¿®æ”¹è¿”å›å€¼ç±»å‹å®¢æˆ·ç«¯ä¹Ÿéœ€è¦é‡æ–°ç”Ÿæˆ</p>
<p>REST
å¯¹è±¡æ¨¡å‹è¡¨ç¤ºäº‹ç‰©ï¼Œå‡½æ•°ç§°ä¸ºæ–¹æ³•ï¼Œä»¥èµ„æºçš„å½¢å¼æŠŠæ¨¡å‹æš´éœ²å‡ºæ¥ï¼Œäººä»¬é€šè¿‡å°‘æ•°å‡ ä¸ªç§°ä¸ºåŠ¨è¯çš„åŠ¨ä½œæ¥æ“çºµèµ„æº
HTTP å®ç° REST æœåŠ¡æ—¶ï¼ŒURL ç”¨äºè¡¨ç¤ºèµ„æºï¼ŒHTTP æ–¹æ³•åˆ™æ“çºµèµ„æºåŠ¨è¯</p>
<p>PUT å†ä½¿ç”¨æ—¶éœ€è¦çŸ¥é“å“ªé¡¹èµ„æºä¼šè¢«æ›¿æ¢ï¼ŒPOST åˆ™åªä¼šåˆ›å»ºå‡ºä¸€é¡¹æ–°èµ„æºä»¥åŠä¸€ä¸ªæ–° URL
PUT æ˜¯å¹‚ç­‰çš„ï¼Œæ— è®ºè°ƒç”¨å¤šå°‘æ¬¡æœåŠ¡å™¨çš„çŠ¶æ€éƒ½ä¸ä¼šæ”¹å˜ï¼ŒPUT ä¼šé‡å¤ä¿®æ”¹ä¸€é¡¹èµ„æº</p>
<p>REST å¯¹èµ„æºæ‰§è¡ŒåŠ¨ä½œæ–¹æ³•
æŠŠè¿‡ç¨‹å…·ä½“åŒ–ï¼ŒæŠŠåŠ¨ä½œè½¬ä¸ºåè¯ç„¶åç”¨ä½œèµ„æº
æŠŠåŠ¨ä½œç”¨ä½œèµ„æºçš„å±æ€§
ä¼˜ç‚¹æ˜¯å¯ä»¥æ·»åŠ é¢å¤–å±æ€§ï¼Œå†ç”¨ PATCH å¯¹èµ„æºè¿›è¡Œéƒ¨åˆ†æ›´æ–°</p>
<h3 id="xml">XML
</h3><p>åˆ›å»ºç”¨äºå­˜å‚¨ XML æ•°æ®çš„ç»“æ„
ä½¿ç”¨ unmarshal å°† xml æ•°æ®è§£å°</p>
<p>åœ¨ç»“æ„ä¸­ä½¿ç”¨`ä½œä¸ºæ ‡ç­¾ï¼Œåå­—å¿…é¡»ä»¥å¤§å†™è‹±æ–‡å­—æ¯å¼€å¤´ï¼Œåˆ›å»ºä¸€ä¸ªä¸ XML å…ƒç´ æ ‡ç­¾åŒåçš„å­—æ®µå­˜å‚¨ï¼Œå¯ä»¥å°†å…ƒç´ &quot;&lt;/name/&gt;&ldquo;å±æ€§å­˜åˆ°å­—æ®µï¼Œä¹Ÿå¯ä»¥ä½¿ç”¨ a&gt;b&gt;c å½¢å¼</p>
<p>è§£ç 
å¤„ç†ä½“ç§¯å°çš„ XML æ–‡ä»¶,unmarshal</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span><span class="lnt">7
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-gdscript3" data-lang="gdscript3"><span class="line"><span class="cl">	<span class="n">xmlFile</span><span class="p">,</span> <span class="n">err</span> <span class="p">:</span><span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">Open</span><span class="p">(</span><span class="s2">&#34;post.xml&#34;</span><span class="p">)</span>
</span></span><span class="line"><span class="cl"><span class="o">...</span>
</span></span><span class="line"><span class="cl">	<span class="n">defer</span> <span class="n">xmlFile</span><span class="o">.</span><span class="n">Close</span><span class="p">()</span>
</span></span><span class="line"><span class="cl">	<span class="n">xmlData</span><span class="p">,</span> <span class="n">err</span> <span class="p">:</span><span class="o">=</span> <span class="n">ioutil</span><span class="o">.</span><span class="n">ReadAll</span><span class="p">(</span><span class="n">xmlFile</span><span class="p">)</span>
</span></span><span class="line"><span class="cl"><span class="o">...</span>
</span></span><span class="line"><span class="cl">	<span class="k">var</span> <span class="n">post</span> <span class="n">Post</span>
</span></span><span class="line"><span class="cl">	<span class="n">xml</span><span class="o">.</span><span class="n">Unmarshal</span><span class="p">(</span><span class="n">xmlData</span><span class="p">,</span> <span class="o">&amp;</span><span class="n">post</span><span class="p">)</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>ä»¥æµçš„æ–¹å¼ä¼ è¾“ XML æ–‡ä»¶ä»¥åŠä½“ç§¯è¾ƒå¤§çš„æ–‡ä»¶
decoder</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback"><span class="line"><span class="cl">	xmlFile, err := os.Create(&#34;post.xml&#34;)
</span></span><span class="line"><span class="cl">...
</span></span><span class="line"><span class="cl">	encoder := xml.NewEncoder(xmlFile)
</span></span><span class="line"><span class="cl">	encoder.Indent(&#34;&#34;, &#34;\t&#34;)
</span></span><span class="line"><span class="cl">	err = encoder.Encode(&amp;post)
</span></span><span class="line"><span class="cl">...
</span></span></code></pre></td></tr></table>
</div>
</div><p>åˆ›å»º XML
marshal</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback"><span class="line"><span class="cl">output, err := xml.Marshal(&amp;post) //æ— æ ¼å¼
</span></span><span class="line"><span class="cl">output, err := xml.MarshalIndent(&amp;post, &#34;&#34;, &#34;\t\t&#34;) //æœ‰æ ¼å¼
</span></span></code></pre></td></tr></table>
</div>
</div><p>æ·»åŠ  XML å£°æ˜
<code>err = ioutil.WriteFile(&quot;post.xml&quot;, []byte(xml.Header + string(output)), 0644)</code></p>
<p>encode</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback"><span class="line"><span class="cl">	xmlFile, err := os.Create(&#34;post.xml&#34;)
</span></span><span class="line"><span class="cl">...
</span></span><span class="line"><span class="cl">	encoder := xml.NewEncoder(xmlFile)
</span></span><span class="line"><span class="cl">	encoder.Indent(&#34;&#34;, &#34;\t&#34;)
</span></span><span class="line"><span class="cl">...
</span></span></code></pre></td></tr></table>
</div>
</div><h3 id="json">JSON
</h3><p>åˆ›å»ºå­˜å‚¨ç»“æ„-æŠŠ json æ•°æ®è§£å°åˆ°ç»“æ„
åˆ›å»ºå­˜å‚¨ç»“æ„-åˆ›å»ºç”¨äºè§£ç çš„è§£ç å™¨-éå†æ•´ä¸ª JSON æ–‡ä»¶å¹¶å°†æ•°æ®è§£ç è‡³ç»“æ„</p>
<p>åˆ›å»ºå­˜å‚¨ç»“æ„å¹¶å¡«å……-æŠŠç»“æ„å°è£…ä¸º JSON æ•°æ®
åˆ›å»ºå­˜å‚¨ç»“æ„å¹¶å¡«å……-åˆ›å»ºå‡ºç”¨äºå­˜å‚¨ JSON æ•°æ®çš„ JSON æ–‡ä»¶-åˆ›å»ºç”¨äºç¼–ç  JSON æ•°æ®çš„ç¼–ç å™¨-é€šè¿‡ç¼–ç å™¨æŠŠç»“æ„ç¼–ç è‡³ JSON æ–‡ä»¶</p>
<p>è§£ç 
marshal</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span><span class="lnt">7
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-gdscript3" data-lang="gdscript3"><span class="line"><span class="cl">	<span class="n">jsonFile</span><span class="p">,</span> <span class="n">err</span> <span class="p">:</span><span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">Open</span><span class="p">(</span><span class="s2">&#34;post.json&#34;</span><span class="p">)</span>
</span></span><span class="line"><span class="cl"><span class="o">...</span>
</span></span><span class="line"><span class="cl">	<span class="n">defer</span> <span class="n">jsonFile</span><span class="o">.</span><span class="n">Close</span><span class="p">()</span>
</span></span><span class="line"><span class="cl">	<span class="n">jsonData</span><span class="p">,</span> <span class="n">err</span> <span class="p">:</span><span class="o">=</span> <span class="n">ioutil</span><span class="o">.</span><span class="n">ReadAll</span><span class="p">(</span><span class="n">jsonFile</span><span class="p">)</span>
</span></span><span class="line"><span class="cl"><span class="o">...</span>
</span></span><span class="line"><span class="cl">	<span class="k">var</span> <span class="n">post</span> <span class="n">Post</span>
</span></span><span class="line"><span class="cl">	<span class="n">json</span><span class="o">.</span><span class="n">Unmarshal</span><span class="p">(</span><span class="n">jsonData</span><span class="p">,</span> <span class="o">&amp;</span><span class="n">post</span><span class="p">)</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>encode</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-gdscript3" data-lang="gdscript3"><span class="line"><span class="cl">	<span class="n">jsonFile</span><span class="p">,</span> <span class="n">err</span> <span class="p">:</span><span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">Open</span><span class="p">(</span><span class="s2">&#34;post.json&#34;</span><span class="p">)</span>
</span></span><span class="line"><span class="cl"><span class="o">...</span>
</span></span><span class="line"><span class="cl">	<span class="n">defer</span> <span class="n">jsonFile</span><span class="o">.</span><span class="n">Close</span><span class="p">()</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">	<span class="n">decoder</span> <span class="p">:</span><span class="o">=</span> <span class="n">json</span><span class="o">.</span><span class="n">NewDecoder</span><span class="p">(</span><span class="n">jsonFile</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">	<span class="k">for</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">		<span class="k">var</span> <span class="n">post</span> <span class="n">Post</span>
</span></span><span class="line"><span class="cl">		<span class="n">err</span> <span class="p">:</span><span class="o">=</span> <span class="n">decoder</span><span class="o">.</span><span class="n">Decode</span><span class="p">(</span><span class="o">&amp;</span><span class="n">post</span><span class="p">)</span>
</span></span><span class="line"><span class="cl"><span class="o">...</span>
</span></span><span class="line"><span class="cl">	<span class="p">}</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>åˆ›å»º json
marshal</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback"><span class="line"><span class="cl">	output, err := json.MarshalIndent(&amp;post, &#34;&#34;, &#34;\t\t&#34;)
</span></span><span class="line"><span class="cl">...
</span></span><span class="line"><span class="cl">	err = ioutil.WriteFile(&#34;post.json&#34;, output, 0644)
</span></span><span class="line"><span class="cl">...
</span></span></code></pre></td></tr></table>
</div>
</div><p>encode</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback"><span class="line"><span class="cl">	jsonFile, err := os.Create(&#34;post.json&#34;)
</span></span><span class="line"><span class="cl">...
</span></span><span class="line"><span class="cl">	jsonWriter := io.Writer(jsonFile)
</span></span><span class="line"><span class="cl">	encoder := json.NewEncoder(jsonWriter)
</span></span><span class="line"><span class="cl">	err = encoder.Encode(&amp;post)
</span></span><span class="line"><span class="cl">...
</span></span></code></pre></td></tr></table>
</div>
</div><h2 id="å¹¶å‘ä¸å¹¶è¡Œ">å¹¶å‘ä¸å¹¶è¡Œ
</h2><p>å¹¶å‘ï¼Œå¤šä¸ªä»»åŠ¡åœ¨åŒä¸€æ—¶é—´æ®µå†…å¯åŠ¨äº’åŠ¨ï¼Œä»»åŠ¡é€šè¿‡é€šä¿¡åˆ†äº«æ•°æ®å¹¶åè°ƒæ‰§è¡Œæ—¶é—´ï¼Œå…±äº«ä¸€ä¸ªèµ„æº</p>
<p>å¹¶è¡Œï¼ŒæŠŠå¤§ä»»åŠ¡åˆ†å‰²æˆå°ä»»åŠ¡ï¼Œéœ€è¦ç‹¬ç«‹èµ„æºï¼Œä¸ä¼šé‡å å¤„ç†</p>
<p>GOMAXPROCS è®©å¹¶è¡Œå¯ä»¥åŒæ—¶è¿è¡Œå¤šä¸ªä»»åŠ¡</p>
<h3 id="æ‰“å°æ•°å­—å’Œè‹±æ–‡">æ‰“å°æ•°å­—å’Œè‹±æ–‡
</h3><p>åˆ›å»º go routine ç¨‹åº
åœ¨ TestGoPrint1 ä¸­ï¼Œå¦‚æœè§„å®š CPU æœ€å¤§æ•°é‡ä¸ä¸º 1ï¼Œæ¯æ¬¡æ‰“å°çš„ç»“æœä¸ç›¸åŒï¼Œå¯ä»¥é€šè¿‡å®šä¹‰æ•°é‡æ¥å›ºå®šç»“æœ
<code>go test -run x -bench . -cpu 1</code>
<code>go test -v</code>
éœ€è¦é€šè¿‡å»¶è¿Ÿæ¥æ˜¾ç¤ºç»“æœ
<code>time.Sleep(1 * time.Millisecond)</code></p>
<p>å¢åŠ  CPU çš„æ•°é‡å¹¶ä¸ä¸€å®šèƒ½å¸¦æ¥æ€§èƒ½æå‡</p>
<h3 id="ç­‰å¾…æ‰§è¡Œå®Œæ¯•">ç­‰å¾…æ‰§è¡Œå®Œæ¯•
</h3><div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-gdscript3" data-lang="gdscript3"><span class="line"><span class="cl"><span class="k">func</span> <span class="p">(</span><span class="n">wg</span> <span class="o">*</span><span class="n">sync</span><span class="o">.</span><span class="n">WaitGroup</span><span class="p">){</span>
</span></span><span class="line"><span class="cl"><span class="o">...</span>
</span></span><span class="line"><span class="cl"><span class="n">wg</span><span class="o">.</span><span class="n">Done</span><span class="p">()</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span><span class="line"><span class="cl"><span class="n">fuc</span> <span class="n">main</span><span class="p">(){</span>
</span></span><span class="line"><span class="cl">	<span class="k">var</span> <span class="n">wg</span> <span class="n">sync</span><span class="o">.</span><span class="n">WaitGroup</span>
</span></span><span class="line"><span class="cl">	<span class="n">wg</span><span class="o">.</span><span class="n">Add</span><span class="p">(</span><span class="mi">2</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">	<span class="n">go</span> <span class="n">printNumbers2</span><span class="p">(</span><span class="o">&amp;</span><span class="n">wg</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">	<span class="n">go</span> <span class="n">printLetters2</span><span class="p">(</span><span class="o">&amp;</span><span class="n">wg</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">	<span class="n">wg</span><span class="o">.</span><span class="n">Wait</span><span class="p">()</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>å¦‚æœæ²¡æœ‰å¯¹è®¡æ•°å™¨è¿›è¡Œå‡æ•°æ“ä½œä¼šå¼•å‘ panic</p>
<h3 id="é€šé“">é€šé“
</h3><p>åªèƒ½æ‰§è¡Œå‘é€æ“ä½œçš„å­—ç¬¦ä¸²ç®¡é“
<code>ch := make(chan &lt;- string)</code></p>
<p>åªèƒ½æ‰§è¡Œæ¥æ”¶æ“ä½œçš„å­—ç¬¦ä¸²ç®¡é“
<code>ch := make(&lt;-chan string)</code></p>
<p>é˜»å¡ä¸»ç¨‹åºï¼Œç›´åˆ° w &lt;- true è¢«è§¦å‘
<code>&lt;-w1</code>
main å‡½æ•°å°è¯•ç§»é™¤ w1 çš„å€¼ï¼Œä½†æ²¡æœ‰åŒ…å«ä»»ä½•å€¼å› æ­¤é˜»å¡</p>
<p>æ— ç¼“å†²é€šé“ä¼šè½®ç•ªæ‰“å°ï¼Œä½†ç”±äº print æŠ¢å…ˆæ‰§è¡Œï¼Œä¼šå‡ºç°å…ˆå–åå…¥çš„æƒ…å†µ</p>
<p>æœ‰ç¼“å†²é€šé“ä¼šä¸€ç›´è¿è¡Œç›´åˆ°é€šé“æ»¡</p>
<p>select è¯­å¥å…è®¸ä»å¤šä¸ªé€šé“é€‰æ‹©ä¸€ä¸ªæ¥æ“ä½œï¼Œä½†ä¸åŠ ä¸Š default ä¼šå‡ºç°æ­»é”
å½“ select æ²¡æœ‰å‘ç°å¯ç”¨é€šé“ï¼Œä¼šæ‰§è¡Œ defaultï¼Œå¦‚æœä¸åŠ å»¶æ—¶ï¼Œåªä¼šçœ‹è§é»˜è®¤åˆ†æ”¯è¾“å‡ºï¼Œé€šé“ a å’Œ b è¿˜æ²¡æ¥å¾—åŠæ¥å—å€¼ï¼Œselect å°±è·³è¿‡æ‰§è¡Œ</p>
<p>close å…³é—­é€šé“å¹¶ä¸æ˜¯å¿…é¡»çš„ï¼Œç”¨äºé€šçŸ¥æ¥æ”¶è€…è¯¥é€šé“ä¸ä¼šåœ¨æ”¶åˆ°ä»»ä½•å€¼</p>
<p>ç¨‹åºä»é€šé“å–å€¼æ˜¯å¤šå€¼æ–¹å¼ï¼Œå€¼å’Œé€šé“çš„çŠ¶æ€
<code>case value, ok1 = &lt;-a</code></p>
<h3 id="é©¬èµ›å…‹ç®—æ³•">é©¬èµ›å…‹ç®—æ³•
</h3><ol>
<li>é”®ï¼šå›¾ç‰‡çš„æ–‡ä»¶åï¼Œå€¼ï¼šå›¾ç‰‡å¹³å‡é¢œè‰²ï¼Œ
é€šè¿‡è®¡ç®—å›¾ç‰‡æ¯ä¸ªåƒç´ çº¢/ç»¿/è“ 3 ç§é¢œè‰²çš„æ€»å’Œï¼Œå¹¶å°†å®ƒä»¬é™¤ä»¥åƒç´ æ€»æ•°é‡ï¼Œå¾—åˆ°ä¸€ä¸ªä¸‰å…ƒç»„ï¼Œä¸‰å…ƒç»„è®¡ç®—å›¾ç‰‡çš„å¹³å‡é¢œè‰²</li>
<li>æ ¹æ®ç“·ç –å›¾ç‰‡å¤§å°åˆ‡å‰²ç›®æ ‡å›¾ç‰‡</li>
<li>å¯¹ç›®æ ‡å›¾ç‰‡çš„å­å›¾ç‰‡è®¡ç®—ä½äºå·¦ä¸Šæ–¹çš„ç¬¬ä¸€ä¸ªåƒç´ å®šä¹‰ä¸ºå¹³å‡é¢œè‰²</li>
<li>æ ¹æ®å­å›¾ç‰‡å¹³å‡é¢œè‰²ï¼Œåœ¨ç“·ç –å›¾ç‰‡æ‰¾å‡ºä¸€å¼ æœ€ä¸ºæ¥è¿‘çš„ç„¶åæ›¿ä»£ã€‚ç¨‹åºéœ€è¦å°†å­å›¾ç‰‡å¹³å‡é¢œè‰²ä¸ç“·ç –å›¾ç‰‡å¹³å‡é¢œè‰²è½¬åŒ–ä¸ºä¸‰ç»´ç©ºé—´çš„ä¸€ä¸ªç‚¹å¹¶è®¡ç®—æ¬§å‡ é‡Œå¾—è·ç¦»</li>
<li>é€‰ä¸­ç“·ç –å›¾ç‰‡åä»æ•°æ®åº“ç§»é™¤</li>
</ol>

</section>

	
    <footer class="article-footer">
    

    <section class="article-lastmod">
        <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-clock" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
  <path stroke="none" d="M0 0h24v24H0z"/>
  <circle cx="12" cy="12" r="9" />
  <polyline points="12 7 12 12 15 15" />
</svg>



        <span>
            æœ€åæ›´æ–°äº 11æœˆ17æ—¥ 12ç‚¹56åˆ†, 2025å¹´
        </span>
    </section></footer>


    
</article>

    

    

<aside class="related-content--wrapper">
    <h2 class="section-title">ç›¸å…³æ–‡ç« </h2>
    <div class="related-content">
        <div class="flex article-list--tile">
            
                
<article class="">
    <a href="/p/go-%E8%AF%AD%E8%A8%80%E5%AE%9E%E6%88%98/">
        
        

        <div class="article-details">
            <h2 class="article-title">Go è¯­è¨€å®æˆ˜</h2>
        </div>
    </a>
</article>

            
                
<article class="">
    <a href="/p/go%E8%AF%AD%E8%A8%80%E5%85%A5%E9%97%A8/">
        
        

        <div class="article-details">
            <h2 class="article-title">Goè¯­è¨€å…¥é—¨</h2>
        </div>
    </a>
</article>

            
                
<article class="">
    <a href="/p/goroutine-%E5%85%A5%E9%97%A8/">
        
        

        <div class="article-details">
            <h2 class="article-title">Goroutine å…¥é—¨</h2>
        </div>
    </a>
</article>

            
                
<article class="">
    <a href="/p/goroutine%E5%B9%B6%E5%8F%91%E6%A8%A1%E5%BC%8F/">
        
        

        <div class="article-details">
            <h2 class="article-title">Goroutineå¹¶å‘æ¨¡å¼</h2>
        </div>
    </a>
</article>

            
                
<article class="">
    <a href="/p/go%E5%B8%B8%E8%A7%81%E9%97%AE%E9%A2%98/">
        
        

        <div class="article-details">
            <h2 class="article-title">Goå¸¸è§é—®é¢˜</h2>
        </div>
    </a>
</article>

            
        </div>
    </div>
</aside>

     
    
        
    <script src='//unpkg.com/@waline/client@v2/dist/waline.js'></script>
<link href='//unpkg.com/@waline/client@v2/dist/waline.css' rel='stylesheet'/>
<div id="waline" class="waline-container"></div>
<style>
    .waline-container {
        background-color: var(--card-background);
        border-radius: var(--card-border-radius);
        box-shadow: var(--shadow-l1);
        padding: var(--card-padding);
        --waline-font-size: var(--article-font-size);
    }
    .waline-container .wl-count {
        color: var(--card-text-color-main);
    }
</style><script>
    
    Waline.init({"dark":"auto","el":"#waline","emoji":["https://cdn.jsdelivr.net/gh/walinejs/emojis@1.1.0/qq","https://cdn.jsdelivr.net/gh/walinejs/emojis@1.1.0/bmoji"],"locale":{"admin":"åšä¸»","placeholder":"æœ‰ä»€ä¹ˆæ–°ç‚¹å­ï¼ŸğŸ‰ï¼ˆä¸Šæ–¹ç•™ä¸‹é‚®ç®±å¯ä»¥æ”¶åˆ°é€šçŸ¥å“¦ï¼‰"},"pageview":true,"requiredMeta":["name","email","url"],"serverURL":"https://comment.byao394.top/","visitor":true});
</script>

    

    <footer class="site-footer">
    <section class="copyright">
        &copy; 
        
            2024 - 
        
        2025 Cancanneed64
    </section>
    
    <section class="powerby">
        ä½¿ç”¨ <a href="https://gohugo.io/" target="_blank" rel="noopener">Hugo</a> æ„å»º <br />
        ä¸»é¢˜ <b><a href="https://github.com/CaiJimmy/hugo-theme-stack" target="_blank" rel="noopener" data-version="3.26.0">Stack</a></b> ç”± <a href="https://jimmycai.com" target="_blank" rel="noopener">Jimmy</a> è®¾è®¡
    </section>





</footer>


    
<div class="pswp" tabindex="-1" role="dialog" aria-hidden="true">

    
    <div class="pswp__bg"></div>

    
    <div class="pswp__scroll-wrap">

        
        <div class="pswp__container">
            <div class="pswp__item"></div>
            <div class="pswp__item"></div>
            <div class="pswp__item"></div>
        </div>

        
        <div class="pswp__ui pswp__ui--hidden">

            <div class="pswp__top-bar">

                

                <div class="pswp__counter"></div>

                <button class="pswp__button pswp__button--close" title="Close (Esc)"></button>

                <button class="pswp__button pswp__button--share" title="Share"></button>

                <button class="pswp__button pswp__button--fs" title="Toggle fullscreen"></button>

                <button class="pswp__button pswp__button--zoom" title="Zoom in/out"></button>

                
                
                <div class="pswp__preloader">
                    <div class="pswp__preloader__icn">
                        <div class="pswp__preloader__cut">
                            <div class="pswp__preloader__donut"></div>
                        </div>
                    </div>
                </div>
            </div>

            <div class="pswp__share-modal pswp__share-modal--hidden pswp__single-tap">
                <div class="pswp__share-tooltip"></div>
            </div>

            <button class="pswp__button pswp__button--arrow--left" title="Previous (arrow left)">
            </button>

            <button class="pswp__button pswp__button--arrow--right" title="Next (arrow right)">
            </button>

            <div class="pswp__caption">
                <div class="pswp__caption__center"></div>
            </div>

        </div>

    </div>

</div><script 
                src="https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/photoswipe.min.js"integrity="sha256-ePwmChbbvXbsO02lbM3HoHbSHTHFAeChekF1xKJdleo="crossorigin="anonymous"
                defer
                >
            </script><script 
                src="https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/photoswipe-ui-default.min.js"integrity="sha256-UKkzOn/w1mBxRmLLGrSeyB4e1xbrp4xylgAWb3M42pU="crossorigin="anonymous"
                defer
                >
            </script><link 
                rel="stylesheet" 
                href="https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/default-skin/default-skin.min.css"crossorigin="anonymous"
            ><link 
                rel="stylesheet" 
                href="https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/photoswipe.min.css"crossorigin="anonymous"
            >

            </main>
        </div>
        <script 
                src="https://cdn.jsdelivr.net/npm/node-vibrant@3.1.6/dist/vibrant.min.js"integrity="sha256-awcR2jno4kI5X0zL8ex0vi2z&#43;KMkF24hUW8WePSA9HM="crossorigin="anonymous"
                
                >
            </script><script type="text/javascript" src="/ts/main.js" defer></script>
<script>
    (function () {
        const customFont = document.createElement('link');
        customFont.href = "https://fonts.googleapis.com/css2?family=Lato:wght@300;400;700&display=swap";

        customFont.type = "text/css";
        customFont.rel = "stylesheet";

        document.head.appendChild(customFont);
    }());
</script>

<style>
  @font-face {
    font-family: 'nano';
    src: url(https://cancanneed64.github.io/font/NanoPyongHanHei-Regular.ttf) format('truetype');
  }

  :root {
    --base-font-family: 'nano';
    --code-font-family: 'nano';
  }
</style>




<script src="https://cdn.jsdelivr.net/npm/aplayer/dist/APlayer.min.js"></script>

<script src="https://cdn.jsdelivr.net/npm/meting@2/dist/Meting.min.js"></script>

<meting-js
	server="netease"
	type="playlist"
	id="3050508794"
	fixed= True>
</meting-js>



 
 <style>
  body {
    background: url(https://cancanneed64.github.io/background/sora.png) no-repeat center top;
    background-size: cover;
    background-attachment: fixed;
  }
</style>

 

<script>
    
    const cssPath = "https://cancanneed64.github.io/waifu/waifu.css";
    const tipsJsonPath = "https://cancanneed64.github.io/waifu/waifu-tips.json";
    const tipsJsPath = "https://cancanneed64.github.io/waifu/waifu-tips.js";
	const live2dJsPath = "https://cancanneed64.github.io/waifu/live2d.min.js";

    
    
    
	const live2d_path = "https://www.novrain.cn/pages/live2d-widget/";

    
    function loadExternalResource(url, type) {
        return new Promise((resolve, reject) => {
            let tag;
            if (type === "css") {
                tag = document.createElement("link");
                tag.rel = "stylesheet";
                tag.href = url;
            }
            else if (type === "js") {
                tag = document.createElement("script");
                tag.src = url;
            }
            if (tag) {
                tag.onload = () => resolve(url);
                tag.onerror = () => reject(url);
                document.head.appendChild(tag);
            }
        });
    }

    
    if (screen.width >= 768) {
        Promise.all([
            loadExternalResource(cssPath, "css"),
            loadExternalResource(live2d_path + "live2d.min.js", "js"),
            loadExternalResource(live2d_path + "waifu-tips.js", "js"),
			loadExternalResource(tipsJsPath, "js"),
			loadExternalResource(live2dJsPath, "js")

        ]).then(() => {
            
            initWidget({
                waifuPath: tipsJsonPath,
                
				
				cdnPath: "https://www.novrain.cn/pages/live2d_api/",
                tools: ["hitokoto", "asteroids", "switch-model", "switch-texture", "photo", "info", "quit"]
            });
			initWaifuMouseEvent();
        });
		
    }
	
	function initWaifuMouseEvent() {
        const waifu = document.getElementById("waifu");
        let isDown = false;
        let waifuLeft;
        let mouseLeft;
        let waifuTop;
        let mouseTop;
        
        waifu.onmousedown = function (e) {
            isDown = true;
            
            waifuLeft = waifu.offsetLeft;
            mouseLeft = e.clientX;
            
            waifuTop = waifu.offsetTop;
            mouseTop = e.clientY;
        }
        
        window.onmousemove = function (e) {
            if (!isDown) {
                return;
            }
            
            let currentLeft = waifuLeft + (e.clientX - mouseLeft);
            if (currentLeft < 0) {
                currentLeft = 0;
            } else if (currentLeft > window.innerWidth - 300) {
                currentLeft = window.innerWidth - 300;
            }
            waifu.style.left = currentLeft  + "px";
            
            let currentTop = waifuTop + (e.clientY - mouseTop);
            if (currentTop < 30) {
                currentTop = 30
            } else if (currentTop > window.innerHeight - 290) {
                currentTop = window.innerHeight - 290
            }
            waifu.style.top = currentTop + "px";
        }
        
        window.onmouseup = function (e) {
            isDown = false;
        }
    }
</script>



			
	<script src="/js/prism.js"></script>


    </body>
</html>
